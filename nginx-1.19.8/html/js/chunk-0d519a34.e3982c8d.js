(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d519a34"],{2837:function(e,t,r){"use strict";r("560a")},"560a":function(e,t,r){},"5b2d":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("el-row",[r("el-col",{staticClass:"logo-wrapper",attrs:{span:4}},[r("span",{staticClass:"logo"},[e._v("饱了吧 ")]),r("img",{staticStyle:{width:"40px",height:"40px"},attrs:{src:"/imgs/logo.png",alt:""}})]),r("el-col",{attrs:{span:16}},[r("el-menu",{attrs:{"default-active":"takeaway",mode:"horizontal","background-color":"#3190e8","text-color":"#fff","active-text-color":"#ffd04b",router:!0}},[r("el-menu-item",{staticClass:"el-icon-dish",attrs:{index:"/takeaway"}},[e._v(" 外卖")]),r("el-menu-item",{staticClass:"el-icon-search",attrs:{index:"/search"}},[e._v(" 搜索")]),r("el-menu-item",{staticClass:"el-icon-s-order",attrs:{index:"/order",disabled:!e.$store.state.user.login}},[e._v(" 订单")]),r("el-menu-item",{staticClass:"el-icon-user",attrs:{index:"/my",disabled:!e.$store.state.user.login}},[e._v(" 我的")]),r("el-menu-item",{staticClass:"el-icon-goods",attrs:{index:"/pointsMall",disabled:!e.$store.state.user.login}},[e._v(" 积分商城")])],1)],1),r("el-col",{attrs:{span:4}},[e.$store.state.user.login?r("el-popover",{attrs:{placement:"bottom",title:"设置",width:"200",trigger:"click"}},[r("div",{staticStyle:{"text-align":"center"}},[r("el-avatar",{attrs:{src:e.$store.state.user.info.avatar}}),r("p",[e._v("蔡徐坤")]),r("p",[e._v("您有 "),r("a",{attrs:{href:"#"}},[e._v("1")]),e._v(" 条新消息")]),r("div",[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.changeAccount}},[e._v("切换账号")]),r("el-button",{attrs:{type:"warning",size:"mini"},on:{click:e.handleLogout}},[e._v("注销")])],1)],1),r("el-avatar",{staticClass:"avatar",attrs:{slot:"reference",src:e.$store.state.user.info.avatar},slot:"reference"})],1):r("span",{staticClass:"login-tip",on:{click:function(t){return e.$store.commit("toggleLoginPanel")}}},[e._v("登录/注册")]),r("span",{staticClass:"el-icon-location location",on:{click:function(t){return e.$store.commit("toggleLocationChooser")}}},[e._v(" "+e._s(e.$store.state.location)+" "),e.$store.state.locationChooserShow?r("span",{staticClass:"el-icon-caret-top"}):r("span",{staticClass:"el-icon-caret-bottom"})])],1)],1),r("location-chooser")],1)},a=[],s=(r("96cf"),r("1da1")),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{title:"选择城市",visible:e.$store.state.locationChooserShow,width:"50%"},on:{close:function(t){return e.$store.commit("toggleLocationChooser")}}},[r("el-autocomplete",{staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入城市",clearable:""},on:{select:e.handleSelect},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}}),r("el-card",{staticStyle:{"margin-top":"20px"}},[r("div",{attrs:{slot:"header"},slot:"header"},[e._v("当前定位城市：")]),r("div",{staticClass:"city"},[r("div",[r("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.handleSelect({value:e.$store.state.location})}}},[e._v(e._s(e.$store.state.location))])],1)])]),r("el-card",{staticStyle:{"margin-top":"20px"}},[r("div",{attrs:{slot:"header"},slot:"header"},[e._v("热门城市")]),r("div",{staticClass:"city"},e._l(e.hotCity,(function(t){return r("div",{key:t},[r("el-link",{attrs:{type:"primary"},on:{click:function(r){return e.handleSelect({value:t})}}},[e._v(e._s(t))])],1)})),0)])],1)],1)},i=[],c={data:function(){return{input:"",hotCity:["北京","上海","广州","深圳"]}},methods:{querySearch:function(e,t){t(this.loadAll())},loadAll:function(){return[{value:"泉州"},{value:"福州"}]},handleSelect:function(e){this.$message.success(e.value)}},mounted:function(){this.restaurants=this.loadAll()}},u=c,l=(r("2837"),r("2877")),p=Object(l["a"])(u,o,i,!1,null,"61a12465",null),f=p.exports,m=r("6525"),d={data:function(){return{}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m["a"].isLogin();case 2:if(r=t.sent,e.$store.commit("setLoginState",r),!r){t.next=9;break}return t.next=7,m["a"].getConsumerInfo();case 7:n=t.sent,e.$store.commit("setUserInfo",n);case 9:case"end":return t.stop()}}),t)})))()},methods:{handleLogout:function(){m["a"].logout(),this.$store.commit("setUserLoginStatus",!1),this.$message.success("注销成功")},changeAccount:function(){this.handleLogout(),this.$store.commit("toggleLoginPanel")}},components:{LocationChooser:f}},h=d,v=(r("9ae2"),Object(l["a"])(h,n,a,!1,null,"76ceea8b",null));t["default"]=v.exports},6525:function(e,t,r){"use strict";r("96cf");var n=r("1da1"),a=r("d4ec"),s=r("bee2"),o=r("27de"),i=function(){function e(){Object(a["a"])(this,e)}return Object(s["a"])(e,[{key:"getItem",value:function(e){return window.localStorage.getItem(e)}},{key:"putItem",value:function(e,t){window.localStorage.setItem(e,t)}},{key:"remove",value:function(e){window.localStorage.removeItem(e)}}]),e}(),c=new i,u=function(){function e(){Object(a["a"])(this,e)}return Object(s["a"])(e,[{key:"isLogin",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=c.getItem("token"),t){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,o["a"].getConsumerInfo();case 5:return r=e.sent,e.abrupt("return",r.success);case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getConsumerInfo",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.consumerInfo){e.next=2;break}return e.abrupt("return",this.consumerInfo);case 2:return e.next=4,o["a"].getConsumerInfo();case 4:if(t=e.sent,t.success){e.next=7;break}throw new Error("获取用户信息失败:"+t.msg);case 7:return e.abrupt("return",t.data);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"login",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].login(t,r);case 2:if(n=e.sent,n.success){e.next=5;break}throw new Error("登录失败:"+n.msg);case 5:return c.putItem("token",n.data.token),e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"register",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].register(t);case 2:if(r=e.sent,r.success){e.next=5;break}throw new Error("注册失败:"+r.msg);case 5:return e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getDefaultDelivery",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].getConsumerDefaultDelivery();case 2:if(t=e.sent,t.success){e.next=5;break}throw new Error("获取默认收货信息失败:"+t.msg);case 5:return e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"logout",value:function(){c.remove("token")}},{key:"uploadAvatar",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t&&0!==t.length){e.next=2;break}throw new Error("上传头像失败:没有选择图片");case 2:return r=new FormData,r.append("file",t[0]),e.next=6,o["a"].uploadAvatar(r);case 6:if(n=e.sent,n.success){e.next=9;break}throw new Error("上传头像失败:"+n.msg);case 9:return e.abrupt("return",n.data);case 10:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateUserInfo",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].updateUserInfo(t);case 2:if(r=e.sent,r.success){e.next=5;break}throw new Error("保存用户信息失败:"+r.msg);case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updatePassword",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].updatePassword(t,r);case 2:if(n=e.sent,n.success){e.next=5;break}throw new Error("修改密码失败:"+n.msg);case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()}]),e}();t["a"]=new u},"9ae2":function(e,t,r){"use strict";r("ab77")},ab77:function(e,t,r){}}]);
//# sourceMappingURL=chunk-0d519a34.e3982c8d.js.map