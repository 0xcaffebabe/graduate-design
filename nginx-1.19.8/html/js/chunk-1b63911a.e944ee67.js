(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b63911a"],{"578a":function(e,r,t){"use strict";t.r(r);var n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-dialog",{attrs:{title:"login"==e.activeName?"登录":"注册",visible:e.$store.state.loginPanelShow,width:"25%"},on:{close:function(r){return e.$store.commit("closeLoginPanel")}}},[t("el-tabs",{model:{value:e.activeName,callback:function(r){e.activeName=r},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"登录",name:"login"}},[t("el-form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.loginFormRules,"label-position":"right","label-width":"80px"}},[t("el-form-item",{attrs:{label:"登录账号",prop:"name"}},[t("el-input",{attrs:{placeholder:"用户名/手机/邮箱"},model:{value:e.loginForm.name,callback:function(r){e.$set(e.loginForm,"name",r)},expression:"loginForm.name"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{placeholder:"密码","show-password":"",clearable:""},model:{value:e.loginForm.password,callback:function(r){e.$set(e.loginForm,"password",r)},expression:"loginForm.password"}})],1)],1),t("div",[t("el-button",{staticStyle:{width:"100px",float:"right"},attrs:{type:"success"},on:{click:e.login}},[e._v("登录")])],1)],1),t("el-tab-pane",{attrs:{label:"注册",name:"register"}},[t("el-form",{ref:"registerForm",attrs:{model:e.registerForm,rules:e.registerFormRules,"label-position":"right","label-width":"80px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{attrs:{placeholder:"用户名"},model:{value:e.registerForm.username,callback:function(r){e.$set(e.registerForm,"username",r)},expression:"registerForm.username"}})],1),t("el-form-item",{attrs:{label:"手机",prop:"phone"}},[t("el-input",{attrs:{placeholder:"手机"},model:{value:e.registerForm.phone,callback:function(r){e.$set(e.registerForm,"phone",r)},expression:"registerForm.phone"}})],1),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{placeholder:"邮箱"},model:{value:e.registerForm.email,callback:function(r){e.$set(e.registerForm,"email",r)},expression:"registerForm.email"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{placeholder:"密码","show-password":""},model:{value:e.registerForm.password,callback:function(r){e.$set(e.registerForm,"password",r)},expression:"registerForm.password"}})],1),t("el-form-item",{attrs:{label:"确认密码",prop:"repeatPassword"}},[t("el-input",{attrs:{placeholder:"确认密码","show-password":""},model:{value:e.registerForm.repeatPassword,callback:function(r){e.$set(e.registerForm,"repeatPassword",r)},expression:"registerForm.repeatPassword"}})],1)],1),t("div",[t("el-button",{staticStyle:{width:"100px",float:"right"},attrs:{type:"primary"},on:{click:e.register}},[e._v("注册")])],1)],1)],1)],1)},a=[],s=(t("b0c0"),t("96cf"),t("1da1")),o=t("6525"),i={data:function(){var e=this,r=function(e,r,t){/^\w+([.-]?w+)*@\w+([.-]?\w+)*(.\w{2,3})+$/.test(r)?t():t(new Error("邮箱格式不正确!"))},t=function(e,r,t){/^1[3456789]\d{9}$/.test(r)?t():t(new Error("手机号码格式不正确!"))},n=function(r,t,n){t===e.registerForm.password?n():n(new Error("两次输入的密码不一致!"))};return{activeName:"login",loginForm:{name:"",password:""},loginFormRules:{name:[{required:!0,message:"请输入登录账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},registerForm:{username:"",password:"",email:"",phone:"",repeatPassword:""},registerFormRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在3-20",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:r,trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:20,message:"长度在3-20",trigger:"blur"}],repeatPassword:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:n,trigger:"blur"}],phone:[{required:!0,message:"请输入手机号码",trigger:"blur"},{validator:t,trigger:"blur"}]}}},methods:{login:function(){var e=this;this.$refs.loginForm.validate(function(){var r=Object(s["a"])(regeneratorRuntime.mark((function r(t){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!t){r.next=16;break}return r.prev=1,r.next=4,o["a"].login(e.loginForm.name,e.loginForm.password);case 4:n=r.sent,e.$message.success("登录成功"),e.$store.commit("setUserInfo",n),e.$store.commit("setLoginState",!0),e.$store.commit("closeLoginPanel"),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](1),e.$message.error(r.t0.message);case 14:r.next=17;break;case 16:e.$message.error("请将信息填写完整");case 17:case"end":return r.stop()}}),r,null,[[1,11]])})));return function(e){return r.apply(this,arguments)}}())},register:function(){var e=this;this.$refs.registerForm.validate(function(){var r=Object(s["a"])(regeneratorRuntime.mark((function r(t){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!t){r.next=14;break}return r.prev=1,r.next=4,o["a"].register(e.registerForm);case 4:n=r.sent,e.$message.success(n.greeting+",您是本系统第".concat(n.userNumber,"个会员")),e.activeName="login",r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](1),e.$message.error(r.t0.message);case 12:r.next=15;break;case 14:e.$message.error("请将信息填写完整");case 15:case"end":return r.stop()}}),r,null,[[1,9]])})));return function(e){return r.apply(this,arguments)}}())}}},u=i,c=t("2877"),l=Object(c["a"])(u,n,a,!1,null,"23026bed",null);r["default"]=l.exports},6525:function(e,r,t){"use strict";t("96cf");var n=t("1da1"),a=t("d4ec"),s=t("bee2"),o=t("27de"),i=function(){function e(){Object(a["a"])(this,e)}return Object(s["a"])(e,[{key:"getItem",value:function(e){return window.localStorage.getItem(e)}},{key:"putItem",value:function(e,r){window.localStorage.setItem(e,r)}},{key:"remove",value:function(e){window.localStorage.removeItem(e)}}]),e}(),u=new i,c=function(){function e(){Object(a["a"])(this,e)}return Object(s["a"])(e,[{key:"isLogin",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=u.getItem("token"),r){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,o["a"].getConsumerInfo();case 5:return t=e.sent,e.abrupt("return",t.success);case 7:case"end":return e.stop()}}),e)})));function r(){return e.apply(this,arguments)}return r}()},{key:"getConsumerInfo",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.consumerInfo){e.next=2;break}return e.abrupt("return",this.consumerInfo);case 2:return e.next=4,o["a"].getConsumerInfo();case 4:if(r=e.sent,r.success){e.next=7;break}throw new Error("获取用户信息失败:"+r.msg);case 7:return e.abrupt("return",r.data);case 8:case"end":return e.stop()}}),e,this)})));function r(){return e.apply(this,arguments)}return r}()},{key:"login",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(r,t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].login(r,t);case 2:if(n=e.sent,n.success){e.next=5;break}throw new Error("登录失败:"+n.msg);case 5:return u.putItem("token",n.data.token),e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)})));function r(r,t){return e.apply(this,arguments)}return r}()},{key:"register",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(r){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].register(r);case 2:if(t=e.sent,t.success){e.next=5;break}throw new Error("注册失败:"+t.msg);case 5:return e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)})));function r(r){return e.apply(this,arguments)}return r}()},{key:"getDefaultDelivery",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].getConsumerDefaultDelivery();case 2:if(r=e.sent,r.success){e.next=5;break}throw new Error("获取默认收货信息失败:"+r.msg);case 5:return e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));function r(){return e.apply(this,arguments)}return r}()},{key:"logout",value:function(){u.remove("token")}},{key:"uploadAvatar",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(r){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r&&0!==r.length){e.next=2;break}throw new Error("上传头像失败:没有选择图片");case 2:return t=new FormData,t.append("file",r[0]),e.next=6,o["a"].uploadAvatar(t);case 6:if(n=e.sent,n.success){e.next=9;break}throw new Error("上传头像失败:"+n.msg);case 9:return e.abrupt("return",n.data);case 10:case"end":return e.stop()}}),e)})));function r(r){return e.apply(this,arguments)}return r}()},{key:"updateUserInfo",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(r){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].updateUserInfo(r);case 2:if(t=e.sent,t.success){e.next=5;break}throw new Error("保存用户信息失败:"+t.msg);case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));function r(r){return e.apply(this,arguments)}return r}()},{key:"updatePassword",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(r,t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"].updatePassword(r,t);case 2:if(n=e.sent,n.success){e.next=5;break}throw new Error("修改密码失败:"+n.msg);case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));function r(r,t){return e.apply(this,arguments)}return r}()}]),e}();r["a"]=new c},b0c0:function(e,r,t){var n=t("83ab"),a=t("9bf2").f,s=Function.prototype,o=s.toString,i=/^\s*function ([^ (]*)/,u="name";n&&!(u in s)&&a(s,u,{configurable:!0,get:function(){try{return o.call(this).match(i)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-1b63911a.e944ee67.js.map