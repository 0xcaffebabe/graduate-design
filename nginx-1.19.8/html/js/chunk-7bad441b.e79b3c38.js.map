{"version":3,"sources":["webpack:///./src/service/OrderService.js","webpack:///./src/service/CartService.js","webpack:///./src/service/StorageService.js","webpack:///./src/service/ConsumerService.js","webpack:///./src/components/order/OrderProduct.vue?e9a8","webpack:///src/components/order/OrderProduct.vue","webpack:///./src/components/order/OrderProduct.vue?5e06","webpack:///./src/components/order/OrderProduct.vue","webpack:///./src/views/ConfirmOrder.vue?3e40","webpack:///src/views/ConfirmOrder.vue","webpack:///./src/views/ConfirmOrder.vue?aa23","webpack:///./src/views/ConfirmOrder.vue","webpack:///./node_modules/core-js/modules/es.array.map.js","webpack:///./src/views/ConfirmOrder.vue?814b","webpack:///./src/service/ProductService.js","webpack:///./src/components/order/OrderProduct.vue?f0aa"],"names":["moment","locale","OrderService","add","calendar","params","JSON","parse","stringify","deliveryId","Error","productList","map","v","productId","specId","quantity","productQuantity","repository","makeOrder","data","success","msg","page","size","getOrderList","orderId","getOrderDetail","forEach","productSpec","order","orderStatus","CartService","addProductIntoCart","shopId","getCartProductList","total","clearCart","StorageService","key","window","localStorage","getItem","val","setItem","removeItem","ConsumerService","token","storageService","getConsumerInfo","this","consumerInfo","username","password","login","putItem","register","getConsumerDefaultDelivery","remove","fileList","length","formData","FormData","append","uploadAvatar","userInfo","updateUserInfo","old","newPassword","updatePassword","render","_vm","_h","$createElement","_c","_self","attrs","slot","_v","_s","shopInfo","shopName","staticClass","_l","item","productImg","staticStyle","productPrice","productName","specName","deliveryFee","getTotalPackageFee","getTotalAmount","staticRenderFns","props","methods","component","path","delivery","realName","phone","building","detail","getDeliveryTime","model","value","callback","$$v","payValue","expression","orderForm","$set","totalAmount","on","handleMakeOrder","payOptions","hasDefaultDelivery","orderNote","couponList","components","OrderProduct","created","$store","state","confirmOrderData","getDefaultDelivery","computed","$","$map","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","target","proto","forced","callbackfn","arguments","undefined","ProductService","product","highPrice","productSpecList","price","lowPrice","packageFee","calcTotalPackageFee","calcTotalAmount"],"mappings":"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","file":"js/chunk-7bad441b.e79b3c38.js","sourcesContent":["import moment from 'moment'\r\nimport repository from '../repository'\r\nmoment.locale('zh-cn')\r\n// 订单服务\r\nclass OrderService {\r\n  getOrderDeliveryTime () {\r\n    return moment().add(1, 'hours').calendar()\r\n  }\r\n\r\n  async makeOrder (params) {\r\n    params = JSON.parse(JSON.stringify(params))\r\n    if (!params.deliveryId) {\r\n      throw new Error('下单失败:收货信息ID为空')\r\n    }\r\n    if (!params.productList) {\r\n      throw new Error('下单失败:下单商品列表为空')\r\n    }\r\n    params.productList = params.productList.map(v => {\r\n      return {\r\n        productId: v.productId,\r\n        specId: v.specId,\r\n        quantity: v.productQuantity\r\n      }\r\n    })\r\n    const data = await repository.makeOrder(params)\r\n    if (!data.success) {\r\n      throw new Error('下单失败:' + data.msg)\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  async getOrderList (page, size) {\r\n    const data = await repository.getOrderList(page, size)\r\n    if (!data.success) {\r\n      throw new Error('获取订单列表失败:' + data.msg)\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  async getOrderDetail (orderId) {\r\n    const data = await repository.getOrderDetail(orderId)\r\n    if (!data.success) {\r\n      throw new Error('获取订单详情失败:' + data.msg)\r\n    }\r\n    if (data.data && data.data.productList) {\r\n      data.data.productList.forEach(v => {\r\n        v.specId = v.productSpec\r\n      })\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  getOrderStatus (order) {\r\n    if (order.orderStatus === 0) {\r\n      return '未处理'\r\n    }\r\n    if (order.orderStatus === 1) {\r\n      return '已处理'\r\n    }\r\n    if (order.orderStatus === 2) {\r\n      return '配送中'\r\n    }\r\n    if (order.orderStatus === 3) {\r\n      return '已完结'\r\n    }\r\n    if (order.orderStatus === 4) {\r\n      return '已作废'\r\n    }\r\n  }\r\n}\r\nexport default new OrderService()\r\n","import repository from '../repository'\r\n// 购物车服务\r\nclass CartService {\r\n  async addProduct (params) {\r\n    const data = await repository.addProductIntoCart(params)\r\n    if (!data.success) {\r\n      throw new Error('加入购物车失败:' + data.msg)\r\n    }\r\n  }\r\n\r\n  async getProductList (shopId) {\r\n    const data = await repository.getCartProductList(shopId)\r\n    if (!data.success) {\r\n      throw new Error('获取购物车商品列表失败:' + data.msg)\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  getCartTotal (productList) {\r\n    if (!productList) {\r\n      return 0\r\n    }\r\n    let total = 0\r\n    productList.forEach(v => {\r\n      total += v.productQuantity\r\n    })\r\n    return total\r\n  }\r\n\r\n  async clearCart (shopId) {\r\n    const data = await repository.clearCart(shopId)\r\n    return data.success\r\n  }\r\n}\r\nexport default new CartService()\r\n","class StorageService {\r\n  getItem (key) {\r\n    return window.localStorage.getItem(key)\r\n  }\r\n\r\n  putItem (key, val) {\r\n    window.localStorage.setItem(key, val)\r\n  }\r\n\r\n  remove (key) {\r\n    window.localStorage.removeItem(key)\r\n  }\r\n}\r\n\r\nexport default new StorageService()\r\n","import repository from '../repository'\r\nimport storageService from './StorageService'\r\nclass ConsumerService {\r\n  // 判断是否登录\r\n  async isLogin () {\r\n    const token = storageService.getItem('token')\r\n    if (!token) {\r\n      return false\r\n    }\r\n    const data = await repository.getConsumerInfo()\r\n    return data.success\r\n  }\r\n\r\n  // 获取当前登录用户信息（会对信息进行缓存）\r\n  async getConsumerInfo () {\r\n    if (this.consumerInfo) {\r\n      return this.consumerInfo\r\n    }\r\n    const data = await repository.getConsumerInfo()\r\n    if (!data.success) {\r\n      throw new Error('获取用户信息失败:' + data.msg)\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  // 进行登录\r\n  async login (username, password) {\r\n    const data = await repository.login(username, password)\r\n    if (!data.success) {\r\n      throw new Error('登录失败:' + data.msg)\r\n    }\r\n    storageService.putItem('token', data.data.token)\r\n    return data.data\r\n  }\r\n\r\n  // 进行注册\r\n  async register (params) {\r\n    const data = await repository.register(params)\r\n    if (!data.success) {\r\n      throw new Error('注册失败:' + data.msg)\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  // 获取当前登录用户默认收货信息\r\n  async getDefaultDelivery () {\r\n    const data = await repository.getConsumerDefaultDelivery()\r\n    if (!data.success) {\r\n      throw new Error('获取默认收货信息失败:' + data.msg)\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  // 注销\r\n  logout () {\r\n    storageService.remove('token')\r\n  }\r\n\r\n  async uploadAvatar (fileList) {\r\n    if (!fileList || fileList.length === 0) {\r\n      throw new Error('上传头像失败:没有选择图片')\r\n    }\r\n    const formData = new FormData()\r\n    formData.append('file', fileList[0])\r\n    const data = await repository.uploadAvatar(formData)\r\n    if (!data.success) {\r\n      throw new Error('上传头像失败:' + data.msg)\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  async updateUserInfo (userInfo) {\r\n    const data = await repository.updateUserInfo(userInfo)\r\n    if (!data.success) {\r\n      throw new Error('保存用户信息失败:' + data.msg)\r\n    }\r\n    return true\r\n  }\r\n\r\n  async updatePassword (old, newPassword) {\r\n    const data = await repository.updatePassword(old, newPassword)\r\n    if (!data.success) {\r\n      throw new Error('修改密码失败:' + data.msg)\r\n    }\r\n    return true\r\n  }\r\n}\r\nexport default new ConsumerService()\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\" \"+_vm._s(_vm.shopInfo.shopName)+\" \"),_c('span',{staticClass:\"el-icon-arrow-right\"})]),_c('ul',{staticClass:\"order-detail-list\"},[_vm._l((_vm.productList),function(item){return _c('li',{key:item.productId + '-' + item.specId,staticClass:\"order-detail-item\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":2}},[_c('el-avatar',{attrs:{\"shape\":\"square\",\"src\":item.productImg}})],1),_c('el-col',{attrs:{\"span\":22}},[_c('span',{staticStyle:{\"float\":\"right\"}},[_vm._v(\"￥\"+_vm._s(item.productPrice))]),_c('span',{staticStyle:{\"float\":\"right\",\"color\":\"#666\",\"margin-right\":\"20px\"}},[_vm._v(\"X \"+_vm._s(item.productQuantity))]),_c('h4',[_vm._v(_vm._s(item.productName))]),_c('span',{staticClass:\"spec-name\"},[_vm._v(_vm._s(item.specName))])])],1)],1)}),_c('el-divider'),_c('li',{staticClass:\"order-detail-item\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":2}},[_c('el-tag',{attrs:{\"size\":\"medium\",\"effect\":\"dark\"}},[_c('span',{staticClass:\"el-icon-truck\"}),_vm._v(\" 配送费\")])],1),_c('el-col',{attrs:{\"span\":22}},[_c('span',{staticStyle:{\"float\":\"right\"}},[_vm._v(\"￥\"+_vm._s(_vm.shopInfo.deliveryFee))]),_c('span',{staticStyle:{\"float\":\"right\",\"color\":\"#666\",\"margin-right\":\"20px\"}},[_vm._v(\"X 1\")])])],1)],1),_c('li',{staticClass:\"order-detail-item\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":2}},[_c('el-tag',{attrs:{\"size\":\"medium\"}},[_c('span',{staticClass:\"el-icon-tableware\"}),_vm._v(\" 包装费\")])],1),_c('el-col',{attrs:{\"span\":22}},[_c('span',{staticStyle:{\"float\":\"right\"}},[_vm._v(\"￥\"+_vm._s(_vm.getTotalPackageFee()))]),_c('span',{staticStyle:{\"float\":\"right\",\"color\":\"#666\",\"margin-right\":\"20px\"}},[_vm._v(\"X 1\")])])],1)],1),_c('li',{staticClass:\"order-detail-item\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":2}},[_c('el-tag',{attrs:{\"size\":\"medium\",\"type\":\"danger\"}},[_c('span',{staticClass:\"el-icon-s-goods\"}),_vm._v(\" 红包折扣\")])],1),_c('el-col',{attrs:{\"span\":22}},[_c('span',{staticClass:\"el-icon\"}),_c('span',{staticStyle:{\"float\":\"right\"}},[_vm._v(\"-￥20\")])])],1)],1),_c('li',{staticClass:\"order-detail-item\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":2}},[_c('el-tag',{attrs:{\"size\":\"medium\",\"type\":\"warning\"}},[_c('span',{staticClass:\"el-icon-money\"}),_vm._v(\" 实付\")])],1),_c('el-col',{attrs:{\"span\":22}},[_c('span',{staticStyle:{\"float\":\"right\"}},[_vm._v(\"￥\"+_vm._s(_vm.getTotalAmount()))])])],1)],1)],2)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-card>\r\n            <div slot=\"header\">\r\n              {{shopInfo.shopName}} <span class=\"el-icon-arrow-right\"></span>\r\n            </div>\r\n            <ul class=\"order-detail-list\">\r\n              <li v-for=\"item in productList\" :key=\"item.productId + '-' + item.specId\" class=\"order-detail-item\">\r\n                <el-row>\r\n                  <el-col :span=\"2\">\r\n                    <el-avatar shape=\"square\" :src=\"item.productImg\"></el-avatar>\r\n                  </el-col>\r\n                  <el-col :span=\"22\">\r\n                    <span style=\"float:right\">￥{{item.productPrice}}</span>\r\n                    <span style=\"float:right;color:#666;margin-right:20px\">X {{item.productQuantity}}</span>\r\n                    <h4>{{item.productName}}</h4>\r\n                    <span class=\"spec-name\">{{item.specName}}</span>\r\n                  </el-col>\r\n                </el-row>\r\n              </li>\r\n              <el-divider></el-divider>\r\n              <li class=\"order-detail-item\">\r\n                <el-row>\r\n                  <el-col :span=\"2\">\r\n                    <el-tag size=\"medium\" effect=\"dark\"> <span class=\"el-icon-truck\"></span> 配送费</el-tag>\r\n                  </el-col>\r\n                  <el-col :span=\"22\">\r\n                    <span style=\"float:right\">￥{{shopInfo.deliveryFee}}</span>\r\n                    <span style=\"float:right;color:#666;margin-right:20px\">X 1</span>\r\n                  </el-col>\r\n                </el-row>\r\n              </li>\r\n              <li class=\"order-detail-item\">\r\n                <el-row>\r\n                  <el-col :span=\"2\">\r\n                    <el-tag size=\"medium\"> <span class=\"el-icon-tableware\"></span> 包装费</el-tag>\r\n                  </el-col>\r\n                  <el-col :span=\"22\">\r\n                    <span style=\"float:right\">￥{{getTotalPackageFee()}}</span>\r\n                    <span style=\"float:right;color:#666;margin-right:20px\">X 1</span>\r\n                  </el-col>\r\n                </el-row>\r\n              </li>\r\n              <li class=\"order-detail-item\">\r\n                <el-row>\r\n                  <el-col :span=\"2\">\r\n                    <el-tag size=\"medium\" type=\"danger\"> <span class=\"el-icon-s-goods\"></span> 红包折扣</el-tag>\r\n                  </el-col>\r\n                  <el-col :span=\"22\">\r\n                    <span class=\"el-icon\"></span>\r\n                    <span style=\"float:right\">-￥20</span>\r\n                  </el-col>\r\n                </el-row>\r\n              </li>\r\n              <li class=\"order-detail-item\">\r\n               <el-row>\r\n                  <el-col :span=\"2\">\r\n                    <el-tag size=\"medium\" type=\"warning\"> <span class=\"el-icon-money\"></span> 实付</el-tag>\r\n                  </el-col>\r\n                  <el-col :span=\"22\">\r\n                    <span style=\"float:right\">￥{{getTotalAmount()}}</span>\r\n                  </el-col>\r\n                </el-row>\r\n              </li>\r\n            </ul>\r\n          </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport productService from '../../service/ProductService'\r\nexport default {\r\n  props: ['shopInfo', 'productList'],\r\n  data () {\r\n    return {}\r\n  },\r\n  methods: {\r\n    getTotalPackageFee () {\r\n      return productService.calcTotalPackageFee(this.productList)\r\n    },\r\n    getTotalAmount () {\r\n      return productService.calcTotalAmount(this.productList)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .order-detail-item {\r\n    margin-bottom: 20px;\r\n    h4 {\r\n      margin: 0;\r\n      font-size: 14px;\r\n    }\r\n    .spec-name {\r\n      font-size: 12px;\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderProduct.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderProduct.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OrderProduct.vue?vue&type=template&id=15ce92b2&scoped=true&\"\nimport script from \"./OrderProduct.vue?vue&type=script&lang=js&\"\nexport * from \"./OrderProduct.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OrderProduct.vue?vue&type=style&index=0&id=15ce92b2&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"15ce92b2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"margin-bottom\":\"20px\"}},[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/shop/1' }}},[_vm._v(_vm._s(_vm.shopInfo.shopName))]),_c('el-breadcrumb-item',[_vm._v(\"确认下单\")])],1)],1),_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"span\":16}},[_c('order-product',{attrs:{\"shopInfo\":_vm.shopInfo,\"productList\":_vm.productList}})],1),_c('el-col',{attrs:{\"span\":8}},[_c('el-card',[_c('el-row',[_c('el-col',{attrs:{\"span\":4}},[_c('span',{staticClass:\"el-icon-location location-icon\"})]),_c('el-col',{attrs:{\"span\":18}},[_c('strong',[_vm._v(_vm._s(_vm.delivery.realName))]),_vm._v(\" \"),_c('span',{staticStyle:{\"font-size\":\"14px\"}},[_vm._v(\"先生/女士\")]),_vm._v(\" \"),_c('span',{staticClass:\"phone\"},[_vm._v(_vm._s(_vm.delivery.phone))]),_c('p',{staticClass:\"address\"},[_vm._v(_vm._s(_vm.delivery.building)+\" \"+_vm._s(_vm.delivery.detail))])]),_c('el-col',{attrs:{\"span\":2}},[_c('span',{staticClass:\"el-icon-arrow-right\"})])],1)],1),_c('el-card',{staticClass:\"delivery-time\"},[_c('el-col',{attrs:{\"span\":8}},[_c('h1',[_vm._v(\"送达时间\")])]),_c('el-col',{attrs:{\"span\":16}},[_c('p',[_vm._v(\"预计 \"+_vm._s(_vm.getDeliveryTime()))]),_c('el-tag',{attrs:{\"effect\":\"dark\",\"type\":\"primary\",\"size\":\"mini\"}},[_vm._v(\"蜂鸟专送\")])],1)],1),_c('el-card',{staticClass:\"coupon-list\"},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"红包卡券\")]),_c('ul',_vm._l((_vm.couponList),function(item){return _c('li',{key:item},[_c('el-row',[_c('el-col',{attrs:{\"span\":4}},[_c('span',{staticClass:\"el-icon-s-cooperation\"})]),_c('el-col',{attrs:{\"span\":18}},[_c('p',[_vm._v(_vm._s(item))])]),_c('el-col',{attrs:{\"span\":2}},[_c('span',{staticClass:\"el-icon-arrow-right\"})])],1)],1)}),0)]),_c('el-card',{staticStyle:{\"margin-top\":\"10px\"}},[_c('ul',[_c('li',[_c('span',[_vm._v(\"支付方式\")]),_c('el-select',{staticStyle:{\"width\":\"100px\",\"margin-left\":\"100px\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.payValue),callback:function ($$v) {_vm.payValue=$$v},expression:\"payValue\"}},_vm._l((_vm.payOptions),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1)],1),_c('el-divider'),_c('li',[_c('p',[_vm._v(\"订单备注\")]),_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.orderForm.orderNote),callback:function ($$v) {_vm.$set(_vm.orderForm, \"orderNote\", $$v)},expression:\"orderForm.orderNote\"}})],1)],1)]),_c('el-card',{staticStyle:{\"margin-top\":\"10px\"}},[_c('span',[_vm._v(\"待支付:￥ \"+_vm._s(_vm.totalAmount))]),_c('el-button',{staticStyle:{\"margin-left\":\"50px\"},attrs:{\"type\":\"success\"},on:{\"click\":_vm.handleMakeOrder}},[_vm._v(\"确认下单\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n      <div style=\"margin-bottom:20px\">\r\n        <el-breadcrumb separator=\"/\">\r\n          <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n          <el-breadcrumb-item :to=\"{ path: '/shop/1' }\">{{shopInfo.shopName}}</el-breadcrumb-item>\r\n          <el-breadcrumb-item>确认下单</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n      </div>\r\n      <el-row :gutter=\"10\">\r\n          <el-col :span=\"16\">\r\n            <order-product :shopInfo=\"shopInfo\" :productList=\"productList\"/>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-card>\r\n              <el-row>\r\n                <el-col :span=\"4\">\r\n                  <span class=\"el-icon-location location-icon\"></span>\r\n                </el-col>\r\n                <el-col :span=\"18\">\r\n                  <strong>{{delivery.realName}}</strong> <span style=\"font-size:14px\">先生/女士</span> <span class=\"phone\">{{delivery.phone}}</span>\r\n                  <p class=\"address\">{{delivery.building}} {{delivery.detail}}</p>\r\n                </el-col>\r\n                <el-col :span=\"2\">\r\n                  <span class=\"el-icon-arrow-right\"></span>\r\n                </el-col>\r\n              </el-row>\r\n            </el-card>\r\n            <el-card class=\"delivery-time\">\r\n              <el-col :span=\"8\"><h1>送达时间</h1></el-col>\r\n              <el-col :span=\"16\">\r\n                <p>预计 {{getDeliveryTime()}}</p>\r\n                <el-tag effect=\"dark\" type=\"primary\" size=\"mini\">蜂鸟专送</el-tag>\r\n              </el-col>\r\n            </el-card>\r\n            <el-card class=\"coupon-list\">\r\n              <div slot=\"header\">红包卡券</div>\r\n              <ul>\r\n                <li v-for=\"item in couponList\" :key=\"item\">\r\n                  <el-row>\r\n                    <el-col :span=\"4\">\r\n                      <span class=\"el-icon-s-cooperation\"></span>\r\n                    </el-col>\r\n                    <el-col :span=\"18\">\r\n                      <p>{{item}}</p>\r\n                    </el-col>\r\n                    <el-col :span=\"2\">\r\n                      <span class=\"el-icon-arrow-right\"></span>\r\n                    </el-col>\r\n                  </el-row>\r\n                </li>\r\n              </ul>\r\n            </el-card>\r\n            <el-card style=\"margin-top:10px\">\r\n              <ul>\r\n                <li>\r\n                    <span>支付方式</span>\r\n                    <el-select v-model=\"payValue\" placeholder=\"请选择\" style=\"width:100px;margin-left:100px\">\r\n                      <el-option\r\n                        v-for=\"item in payOptions\"\r\n                        :key=\"item\"\r\n                        :label=\"item\"\r\n                        :value=\"item\">\r\n                      </el-option>\r\n                    </el-select>\r\n                </li>\r\n                <el-divider></el-divider>\r\n                <li>\r\n                  <p>订单备注</p>\r\n                  <el-input type=\"textarea\" v-model=\"orderForm.orderNote\"></el-input>\r\n                </li>\r\n              </ul>\r\n            </el-card>\r\n            <el-card style=\"margin-top:10px\">\r\n              <span>待支付:￥ {{totalAmount}}</span>\r\n              <el-button type=\"success\" style=\"margin-left:50px\" @click=\"handleMakeOrder\">确认下单</el-button>\r\n            </el-card>\r\n          </el-col>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport OrderProduct from '../components/order/OrderProduct'\r\nimport consumerService from '../service/ConsumerService'\r\nimport orderService from '../service/OrderService'\r\nimport cartService from '../service/CartService'\r\nimport productService from '../service/ProductService'\r\nexport default {\r\n  data () {\r\n    return {\r\n      payValue: '支付宝',\r\n      payOptions: [\r\n        '支付宝', '银联'\r\n      ],\r\n      shopInfo: {},\r\n      productList: [],\r\n      hasDefaultDelivery: false,\r\n      delivery: {},\r\n      orderForm: {\r\n        deliveryId: '',\r\n        orderNote: '',\r\n        productList: []\r\n      },\r\n      couponList: [\r\n        '店铺红包 | 满 20-20',\r\n        '超值联盟红包 | 满 20-3',\r\n        '新人首单红包 | 满 20-15'\r\n      ]\r\n    }\r\n  },\r\n  components: {\r\n    OrderProduct\r\n  },\r\n  created () {\r\n    this.shopInfo = this.$store.state.confirmOrderData.shopInfo\r\n    this.productList = this.$store.state.confirmOrderData.productList\r\n    this.orderForm.productList = this.productList\r\n    this.getDefaultDelivery()\r\n  },\r\n  computed: {\r\n    totalAmount () {\r\n      return productService.calcTotalAmount(this.productList)\r\n    }\r\n  },\r\n  methods: {\r\n    async getDefaultDelivery () {\r\n      try {\r\n        const delivery = await consumerService.getDefaultDelivery()\r\n        if (delivery) {\r\n          this.hasDefaultDelivery = true\r\n          this.delivery = delivery\r\n          this.orderForm.deliveryId = this.delivery.deliveryId\r\n        }\r\n      } catch (e) {\r\n        this.$message.error(e.message)\r\n      }\r\n    },\r\n    getDeliveryTime () {\r\n      return orderService.getOrderDeliveryTime()\r\n    },\r\n    handleMakeOrder () {\r\n      this.makeOrder()\r\n    },\r\n    async makeOrder () {\r\n      try {\r\n        const orderId = await orderService.makeOrder(this.orderForm)\r\n        if (orderId) {\r\n          this.$message.success('下单成功,请进行支付')\r\n          cartService.clearCart(this.shopInfo.shopId)\r\n          this.$router.push({\r\n            name: 'pay',\r\n            params: {\r\n              orderId,\r\n              shopInfo: this.shopInfo\r\n            }\r\n          })\r\n        }\r\n      } catch (e) {\r\n        this.$message.error(e.message)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .el-icon-location {\r\n    font-size:32px;\r\n    line-height:48px;\r\n    height:48px;\r\n    color:rgb(49, 144, 232);\r\n  }\r\n  .el-icon-arrow-right {\r\n    font-size: 24px;\r\n    line-height:56px;\r\n    height:56px;\r\n  }\r\n  .phone {\r\n    font-size: 14px;\r\n  }\r\n  .address {\r\n    margin-top: 5px;\r\n    font-size: 14px;\r\n  }\r\n  .delivery-time {\r\n    margin-top: 10px;\r\n    padding-bottom: 20px;\r\n    h1 {\r\n      margin: 0;\r\n      font-size: 20px;\r\n      height: 44px;\r\n      line-height: 44px;\r\n    }\r\n    p {\r\n      margin: 0;\r\n      color:rgb(49, 144, 232);\r\n    }\r\n    .el-tag {\r\n      float: right;\r\n      margin-top: 10px;\r\n    }\r\n  }\r\n  .coupon-list {\r\n    margin-top: 10px;\r\n    .el-icon-s-cooperation {\r\n      font-size: 32px;\r\n      line-height:48px;\r\n      height:48px;\r\n      color: red;\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfirmOrder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfirmOrder.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConfirmOrder.vue?vue&type=template&id=fe91f0a6&scoped=true&\"\nimport script from \"./ConfirmOrder.vue?vue&type=script&lang=js&\"\nexport * from \"./ConfirmOrder.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ConfirmOrder.vue?vue&type=style&index=0&id=fe91f0a6&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fe91f0a6\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfirmOrder.vue?vue&type=style&index=0&id=fe91f0a6&lang=less&scoped=true&\"","class ProductService {\r\n  getProductPriceRange (product) {\r\n    let highPrice = product.productSpecList[0].price\r\n    let lowPrice = product.productSpecList[0].price\r\n    product.productSpecList.forEach(v => {\r\n      if (v.price < lowPrice) {\r\n        lowPrice = v.price\r\n      }\r\n      if (v.price > highPrice) {\r\n        highPrice = v.price\r\n      }\r\n    })\r\n    return { highPrice, lowPrice }\r\n  }\r\n\r\n  // 计算商品列表总包装费\r\n  calcTotalPackageFee (productList) {\r\n    if (!productList) {\r\n      return 0\r\n    }\r\n    let total = 0\r\n    productList.forEach(v => {\r\n      total += v.packageFee\r\n    })\r\n    return total\r\n  }\r\n\r\n  // 计算商品列表总付\r\n  calcTotalAmount (productList) {\r\n    if (!productList) {\r\n      return 0\r\n    }\r\n    let total = 0\r\n    productList.forEach(v => {\r\n      total += v.productPrice * v.productQuantity\r\n    })\r\n    total += this.calcTotalPackageFee(productList)\r\n    return total\r\n  }\r\n\r\n  // 计算商品总价（不含包装费）\r\n  calcProductTotalAmount (productList) {\r\n    return this.calcTotalAmount(productList) - this.calcTotalPackageFee(productList)\r\n  }\r\n}\r\nexport default new ProductService()\r\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderProduct.vue?vue&type=style&index=0&id=15ce92b2&lang=less&scoped=true&\""],"sourceRoot":""}