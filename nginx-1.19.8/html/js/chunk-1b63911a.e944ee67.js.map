{"version":3,"sources":["webpack:///./src/components/Login.vue?2173","webpack:///src/components/Login.vue","webpack:///./src/components/Login.vue?2227","webpack:///./src/components/Login.vue","webpack:///./src/service/StorageService.js","webpack:///./src/service/ConsumerService.js","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","activeName","$store","state","loginPanelShow","on","$event","commit","model","value","callback","$$v","expression","ref","loginForm","loginFormRules","$set","staticStyle","login","_v","registerForm","registerFormRules","register","staticRenderFns","data","test","Error","name","password","username","email","phone","repeatPassword","methods","$refs","validate","component","StorageService","key","window","localStorage","getItem","val","setItem","removeItem","ConsumerService","token","storageService","repository","getConsumerInfo","success","consumerInfo","msg","putItem","params","getConsumerDefaultDelivery","remove","fileList","length","formData","FormData","append","uploadAvatar","userInfo","updateUserInfo","old","newPassword","updatePassword","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","match","error"],"mappings":"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","file":"js/chunk-1b63911a.e944ee67.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"title\":_vm.activeName == 'login' ? '登录' : '注册',\"visible\":_vm.$store.state.loginPanelShow,\"width\":\"25%\"},on:{\"close\":function($event){return _vm.$store.commit('closeLoginPanel')}}},[_c('el-tabs',{model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"登录\",\"name\":\"login\"}},[_c('el-form',{ref:\"loginForm\",attrs:{\"model\":_vm.loginForm,\"rules\":_vm.loginFormRules,\"label-position\":'right',\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"登录账号\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"placeholder\":\"用户名/手机/邮箱\"},model:{value:(_vm.loginForm.name),callback:function ($$v) {_vm.$set(_vm.loginForm, \"name\", $$v)},expression:\"loginForm.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"placeholder\":\"密码\",\"show-password\":\"\",\"clearable\":\"\"},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}})],1)],1),_c('div',[_c('el-button',{staticStyle:{\"width\":\"100px\",\"float\":\"right\"},attrs:{\"type\":\"success\"},on:{\"click\":_vm.login}},[_vm._v(\"登录\")])],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"注册\",\"name\":\"register\"}},[_c('el-form',{ref:\"registerForm\",attrs:{\"model\":_vm.registerForm,\"rules\":_vm.registerFormRules,\"label-position\":'right',\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{attrs:{\"placeholder\":\"用户名\"},model:{value:(_vm.registerForm.username),callback:function ($$v) {_vm.$set(_vm.registerForm, \"username\", $$v)},expression:\"registerForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"phone\"}},[_c('el-input',{attrs:{\"placeholder\":\"手机\"},model:{value:(_vm.registerForm.phone),callback:function ($$v) {_vm.$set(_vm.registerForm, \"phone\", $$v)},expression:\"registerForm.phone\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{attrs:{\"placeholder\":\"邮箱\"},model:{value:(_vm.registerForm.email),callback:function ($$v) {_vm.$set(_vm.registerForm, \"email\", $$v)},expression:\"registerForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"placeholder\":\"密码\",\"show-password\":\"\"},model:{value:(_vm.registerForm.password),callback:function ($$v) {_vm.$set(_vm.registerForm, \"password\", $$v)},expression:\"registerForm.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"确认密码\",\"prop\":\"repeatPassword\"}},[_c('el-input',{attrs:{\"placeholder\":\"确认密码\",\"show-password\":\"\"},model:{value:(_vm.registerForm.repeatPassword),callback:function ($$v) {_vm.$set(_vm.registerForm, \"repeatPassword\", $$v)},expression:\"registerForm.repeatPassword\"}})],1)],1),_c('div',[_c('el-button',{staticStyle:{\"width\":\"100px\",\"float\":\"right\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.register}},[_vm._v(\"注册\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-dialog\r\n    :title=\"activeName == 'login' ? '登录' : '注册'\"\r\n    :visible=\"$store.state.loginPanelShow\"\r\n    @close=\"$store.commit('closeLoginPanel')\"\r\n    width=\"25%\">\r\n      <el-tabs v-model=\"activeName\">\r\n        <el-tab-pane label=\"登录\" name=\"login\">\r\n          <el-form :model=\"loginForm\" :rules=\"loginFormRules\" ref=\"loginForm\" :label-position=\"'right'\" label-width=\"80px\">\r\n            <el-form-item label=\"登录账号\" prop=\"name\">\r\n              <el-input v-model=\"loginForm.name\" placeholder=\"用户名/手机/邮箱\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"密码\" prop=\"password\">\r\n              <el-input v-model=\"loginForm.password\" placeholder=\"密码\" show-password clearable></el-input>\r\n            </el-form-item>\r\n          </el-form>\r\n           <div>\r\n            <el-button type=\"success\" style=\"width:100px;float:right\" @click=\"login\">登录</el-button>\r\n           </div>\r\n        </el-tab-pane>\r\n        <el-tab-pane label=\"注册\" name=\"register\">\r\n          <el-form :model=\"registerForm\" :rules=\"registerFormRules\" ref=\"registerForm\" :label-position=\"'right'\" label-width=\"80px\">\r\n            <el-form-item label=\"用户名\" prop=\"username\">\r\n              <el-input v-model=\"registerForm.username\" placeholder=\"用户名\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"手机\" prop=\"phone\">\r\n              <el-input v-model=\"registerForm.phone\" placeholder=\"手机\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"邮箱\" prop=\"email\">\r\n              <el-input v-model=\"registerForm.email\" placeholder=\"邮箱\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"密码\" prop=\"password\">\r\n              <el-input v-model=\"registerForm.password\" placeholder=\"密码\" show-password></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"确认密码\" prop=\"repeatPassword\">\r\n              <el-input v-model=\"registerForm.repeatPassword\" placeholder=\"确认密码\" show-password></el-input>\r\n            </el-form-item>\r\n          </el-form>\r\n           <div>\r\n            <el-button type=\"primary\" style=\"width:100px;float:right\" @click=\"register\">注册</el-button>\r\n           </div>\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport consumerService from '../service/ConsumerService'\r\nexport default {\r\n  data () {\r\n    const emailValidator = (rule, value, callback) => {\r\n      if (/^\\w+([.-]?w+)*@\\w+([.-]?\\w+)*(.\\w{2,3})+$/.test(value)) {\r\n        callback()\r\n      } else {\r\n        callback(new Error('邮箱格式不正确!'))\r\n      }\r\n    }\r\n    const phoneValidator = (role, value, callback) => {\r\n      if (/^1[3456789]\\d{9}$/.test(value)) {\r\n        callback()\r\n      } else {\r\n        callback(new Error('手机号码格式不正确!'))\r\n      }\r\n    }\r\n    const passwordValidator = (role, value, callback) => {\r\n      if (value === this.registerForm.password) {\r\n        callback()\r\n      } else {\r\n        callback(new Error('两次输入的密码不一致!'))\r\n      }\r\n    }\r\n    return {\r\n      activeName: 'login',\r\n      loginForm: {\r\n        name: '',\r\n        password: ''\r\n      },\r\n      loginFormRules: {\r\n        name: [\r\n          { required: true, message: '请输入登录账号', trigger: 'blur' }\r\n        ],\r\n        password: [\r\n          { required: true, message: '请输入密码', trigger: 'blur' }\r\n        ]\r\n      },\r\n      registerForm: {\r\n        username: '',\r\n        password: '',\r\n        email: '',\r\n        phone: '',\r\n        repeatPassword: ''\r\n      },\r\n      registerFormRules: {\r\n        username: [\r\n          { required: true, message: '请输入用户名', trigger: 'blur' },\r\n          { min: 3, max: 20, message: '长度在3-20', trigger: 'blur' }\r\n        ],\r\n        email: [\r\n          { required: true, message: '请输入邮箱', trigger: 'blur' },\r\n          { validator: emailValidator, trigger: 'blur' }\r\n        ],\r\n        password: [\r\n          { required: true, message: '请输入密码', trigger: 'blur' },\r\n          { min: 3, max: 20, message: '长度在3-20', trigger: 'blur' }\r\n        ],\r\n        repeatPassword: [\r\n          { required: true, message: '请输入密码', trigger: 'blur' },\r\n          { validator: passwordValidator, trigger: 'blur' }\r\n        ],\r\n        phone: [\r\n          { required: true, message: '请输入手机号码', trigger: 'blur' },\r\n          { validator: phoneValidator, trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    login () {\r\n      this.$refs.loginForm.validate(async valid => {\r\n        if (valid) {\r\n          try {\r\n            const data = await consumerService.login(this.loginForm.name, this.loginForm.password)\r\n            this.$message.success('登录成功')\r\n            // 设置登录状态 用户信息\r\n            this.$store.commit('setUserInfo', data)\r\n            this.$store.commit('setLoginState', true)\r\n            // 关闭弹窗\r\n            this.$store.commit('closeLoginPanel')\r\n          } catch (e) {\r\n            this.$message.error(e.message)\r\n          }\r\n        } else {\r\n          this.$message.error('请将信息填写完整')\r\n        }\r\n      })\r\n    },\r\n    register () {\r\n      this.$refs.registerForm.validate(async valid => {\r\n        if (valid) {\r\n          try {\r\n            const data = await consumerService.register(this.registerForm)\r\n            this.$message.success(data.greeting + `,您是本系统第${data.userNumber}个会员`)\r\n            // 切换到登录tab栏\r\n            this.activeName = 'login'\r\n          } catch (e) {\r\n            this.$message.error(e.message)\r\n          }\r\n        } else {\r\n          this.$message.error('请将信息填写完整')\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=23026bed&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"23026bed\",\n  null\n  \n)\n\nexport default component.exports","class StorageService {\r\n  getItem (key) {\r\n    return window.localStorage.getItem(key)\r\n  }\r\n\r\n  putItem (key, val) {\r\n    window.localStorage.setItem(key, val)\r\n  }\r\n\r\n  remove (key) {\r\n    window.localStorage.removeItem(key)\r\n  }\r\n}\r\n\r\nexport default new StorageService()\r\n","import repository from '../repository'\r\nimport storageService from './StorageService'\r\nclass ConsumerService {\r\n  // 判断是否登录\r\n  async isLogin () {\r\n    const token = storageService.getItem('token')\r\n    if (!token) {\r\n      return false\r\n    }\r\n    const data = await repository.getConsumerInfo()\r\n    return data.success\r\n  }\r\n\r\n  // 获取当前登录用户信息（会对信息进行缓存）\r\n  async getConsumerInfo () {\r\n    if (this.consumerInfo) {\r\n      return this.consumerInfo\r\n    }\r\n    const data = await repository.getConsumerInfo()\r\n    if (!data.success) {\r\n      throw new Error('获取用户信息失败:' + data.msg)\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  // 进行登录\r\n  async login (username, password) {\r\n    const data = await repository.login(username, password)\r\n    if (!data.success) {\r\n      throw new Error('登录失败:' + data.msg)\r\n    }\r\n    storageService.putItem('token', data.data.token)\r\n    return data.data\r\n  }\r\n\r\n  // 进行注册\r\n  async register (params) {\r\n    const data = await repository.register(params)\r\n    if (!data.success) {\r\n      throw new Error('注册失败:' + data.msg)\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  // 获取当前登录用户默认收货信息\r\n  async getDefaultDelivery () {\r\n    const data = await repository.getConsumerDefaultDelivery()\r\n    if (!data.success) {\r\n      throw new Error('获取默认收货信息失败:' + data.msg)\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  // 注销\r\n  logout () {\r\n    storageService.remove('token')\r\n  }\r\n\r\n  async uploadAvatar (fileList) {\r\n    if (!fileList || fileList.length === 0) {\r\n      throw new Error('上传头像失败:没有选择图片')\r\n    }\r\n    const formData = new FormData()\r\n    formData.append('file', fileList[0])\r\n    const data = await repository.uploadAvatar(formData)\r\n    if (!data.success) {\r\n      throw new Error('上传头像失败:' + data.msg)\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  async updateUserInfo (userInfo) {\r\n    const data = await repository.updateUserInfo(userInfo)\r\n    if (!data.success) {\r\n      throw new Error('保存用户信息失败:' + data.msg)\r\n    }\r\n    return true\r\n  }\r\n\r\n  async updatePassword (old, newPassword) {\r\n    const data = await repository.updatePassword(old, newPassword)\r\n    if (!data.success) {\r\n      throw new Error('修改密码失败:' + data.msg)\r\n    }\r\n    return true\r\n  }\r\n}\r\nexport default new ConsumerService()\r\n","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}