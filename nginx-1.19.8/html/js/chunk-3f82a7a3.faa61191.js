(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f82a7a3"],{"03fc":function(t,e,r){"use strict";r("99af"),r("4160"),r("159b");var a=r("5530"),n=(r("96cf"),r("1da1")),c=r("d4ec"),s=r("bee2"),o=r("27de"),i=r("1795"),u=function(){function t(){Object(c["a"])(this,t)}return Object(s["a"])(t,[{key:"getShopListByCategory",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].getShopByCategory(Object(a["a"])({location:i["a"].getLocation().location},e));case 2:if(r=t.sent,r.success){t.next=5;break}throw new Error("获取分类".concat(e.categoryId,"下的店铺失败:").concat(r.msg));case 5:return t.abrupt("return",r.data);case 6:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getNearyByShop",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].getNearByShop(i["a"].getLocation().location);case 2:if(e=t.sent,e.success){t.next=5;break}throw new Error("获取附近店铺失败:"+e.msg);case 5:return t.abrupt("return",e.data);case 6:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"searchShop",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].searchShop(e);case 2:if(r=t.sent,r.success){t.next=5;break}throw new Error("搜索店铺失败:"+r.msg);case 5:return t.abrupt("return",r.data);case 6:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getShopInfo",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].getShopInfo(e);case 2:if(r=t.sent,r.success){t.next=5;break}throw new Error("获取店铺信息失败:"+r.msg);case 5:return t.abrupt("return",r.data);case 6:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getShopProductCategory",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].getShopProductCategory(e);case 2:if(r=t.sent,r.success){t.next=5;break}throw new Error("获取店铺商品分类失败:"+r.msg);case 5:return t.abrupt("return",r.data);case 6:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getProductList",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,r){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].getProductList(e,r);case 2:if(a=t.sent,a.success){t.next=5;break}throw new Error("获取商品列表失败:"+a.msg);case 5:return n=a.data,n.forEach((function(t){t.defaultSpec=t.productSpecList[0]})),t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"getShopEval",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].getShopEval(e);case 2:if(r=t.sent,r.success){t.next=5;break}throw new Error("获取店铺评价失败:"+r.msg);case 5:return t.abrupt("return",r.data);case 6:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getShopEvalList",value:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].getShopEvalList(e);case 2:if(r=t.sent,r.success){t.next=5;break}throw new Error("获取店铺评价列表失败:"+r.msg);case 5:return t.abrupt("return",r.data);case 6:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}();e["a"]=new u},"057f":function(t,e,r){var a=r("fc6a"),n=r("241c").f,c={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(t){try{return n(t)}catch(e){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==c.call(t)?o(t):n(a(t))}},"0a7c":function(t,e,r){},"0afc":function(t,e,r){"use strict";r("0a7c")},"0fa5":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("shop-header",{attrs:{info:t.shopInfo}}),r("el-card",{staticStyle:{"margin-top":"50px"}},[r("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"点餐",name:"product"}},[r("shop-product",{attrs:{shopId:t.shopId}})],1),r("el-tab-pane",{attrs:{label:"评价",name:"eval"}},[r("shop-eval",{attrs:{shopId:t.shopId}})],1),r("el-tab-pane",{attrs:{label:"商家",name:"seller"}},[r("el-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("el-tag",[t._v("食无忧")]),t._v(" 该商户已经购买食品安全责任险，食品安全有保障 "),r("el-button",{staticStyle:{float:"right"},attrs:{type:"danger",size:"medium"}},[t._v("举报商家")])],1),r("p",[t._v("商家品类：黄焖鸡 / 盖浇饭")]),r("p",[t._v("营业时间：周一至周日 10:00 - 22:00")]),r("p",[t._v("店主："+t._s(t.shopInfo.sellerName))]),r("ul",{staticClass:"shop-inner-list"},[r("li",[r("el-image",{staticStyle:{height:"144px",width:"144px"},attrs:{src:"/imgs/shop_inner/1.jpg","preview-src-list":["/imgs/shop_inner/1.jpg"],fit:"cover"}})],1),r("li",[r("el-image",{staticStyle:{height:"144px",width:"144px"},attrs:{src:"/imgs/shop_inner/2.png","preview-src-list":["/imgs/shop_inner/2.png"],fit:"cover"}})],1)])])],1)],1)],1),r("shop-cart",{ref:"shopCart",attrs:{cartShow:t.cartShow,shopId:t.shopId},on:{loadComplete:t.handleCartLoadComplete,"handle-settlement":t.handleSettlementClick}}),r("shop-chat"),r("div",{staticClass:"cart-bar"},[r("el-badge",{attrs:{value:t.cartTotal}},[r("el-button",{staticClass:"cart-button",attrs:{icon:"el-icon-shopping-cart-2",circle:""},on:{click:function(e){return t.$store.commit("toggleCart")}}})],1),r("el-badge",{staticClass:"chat-badge",attrs:{value:28}},[r("el-button",{staticClass:"chat-button",attrs:{icon:"el-icon-headset",circle:""},on:{click:function(e){return t.$store.commit("toggleShopChatShow")}}})],1),r("el-button",{staticClass:"pay-button",attrs:{type:"success"},on:{click:t.handleSettlementClick}},[t._v("结算")])],1)],1)},n=[],c=(r("96cf"),r("1da1")),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-card",{staticClass:"shop-header",attrs:{"body-style":{padding:0}}},[r("el-row",{staticClass:"shop-detail",attrs:{gutter:20}},[r("el-col",{attrs:{span:9}},[r("el-image",{staticClass:"shop-logo",staticStyle:{width:"400px",height:"200px"},attrs:{src:t.info.shopLogo,"preview-src-list":t.imgList,fit:"cover"}}),r("ul",{staticClass:"img-list"},t._l(t.imgList.slice(1,5),(function(e){return r("li",{key:e},[r("el-image",{staticClass:"shop-logo",attrs:{src:e,"preview-src-list":t.imgList,fit:"cover"}})],1)})),0)],1),r("el-col",{attrs:{span:15}},[r("h2",{staticClass:"shop-name"},[t._v(t._s(t.info.shopName))]),r("el-rate",{staticClass:"shop-rate",attrs:{disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}分"},model:{value:t.rate,callback:function(e){t.rate=e},expression:"rate"}}),r("el-divider"),r("p",{staticClass:"shop-delivery"},[r("el-tag",{staticStyle:{"vertical-align":"top"},attrs:{effect:"dark",type:"primary",size:"mini"}},[t._v("蜂鸟专送")]),t._v(" / 35分钟送达 / 配送费￥"+t._s(t.info.deliveryFee)+" 起送价 ￥"+t._s(t.info.startingPrice)+" ")],1),r("p",[t._v("地址：鲤城区媒人桥路2号 "),r("span",{staticClass:"el-icon-location",staticStyle:{color:"#409EFF"}})]),r("p",[t._v("电话：17359801234")]),r("p",{staticClass:"shop-slogan"},[t._v(t._s(t.info.shopSlogan))]),r("el-divider")],1)],1)],1)],1)},o=[],i={props:["info"],data:function(){return{rate:3.7,imgActive:0,imgList:["imgs/foods/huangmenji.jpg","imgs/foods/huangmenfuzhu.jpg","imgs/foods/huangmenzhujiao.jpg","imgs/foods/huangmenpaigu.jpg"]}},methods:{handleImgClick:function(t,e){this.imgActive=t,e.preventDefault()}},created:function(){this.imgList.unshift(this.info.shopLogo)}},u=i,l=(r("bb5b"),r("2877")),p=Object(l["a"])(u,s,o,!1,null,"2f81da88",null),f=p.exports,d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-tabs",{attrs:{"tab-position":"left",value:t.categoryActiveName},on:{"tab-click":t.handleCategoryTabClick}},t._l(t.categoryList,(function(e){return r("el-tab-pane",{key:e.categoryId,attrs:{label:e.categoryName,name:e.categoryId+""}},[r("div",{staticClass:"clearfix product-cate-title"},[r("h2",[t._v(t._s(e.categoryName))]),r("span",[t._v(" "+t._s(e.categoryDesc))])]),0==t.productList.length?r("el-alert",{attrs:{title:"没有数据",closable:!1}}):t._e(),r("ul",{staticClass:"product-list"},[r("transition-group",{attrs:{name:"list"}},t._l(t.productList,(function(e){return r("li",{key:e.productId},[r("product-item",{attrs:{product:e,shopId:t.shopId}})],1)})),0)],1)],1)})),1)},h=[],g=(r("b0c0"),r("03fc")),m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[r("div",{staticClass:"product-img-wrapper"},[r("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.product.productImg,"preview-src-list":[t.product.productImg],fit:"cover"}})],1)]),r("el-col",{attrs:{span:12}},[r("h2",[t._v(t._s(t.product.productName))]),r("p",{staticClass:"product-detail"},[t._v(t._s(t.product.productDesc))]),r("p",{staticClass:"product-sales"},[t._v("月售:"+t._s(t.product.sales)+"份 好评率:"+t._s(t.product.positiveRate)+"%")]),r("el-radio-group",{attrs:{size:"mini"},model:{value:t.choosedSpec,callback:function(e){t.choosedSpec=e},expression:"choosedSpec"}},t._l(t.product.productSpecList,(function(e){return r("el-radio-button",{key:e.specId,attrs:{label:e.specName},nativeOn:{click:function(r){return t.handleSpecClick(e)}}})})),1)],1),r("el-col",{attrs:{span:6}},[t.showPrice()?t._e():r("h1",{staticClass:"product-price"},[t._v("￥"+t._s(t.getPriceRange(t.product)))]),t.showPrice()?r("h1",{staticClass:"product-price"},[t._v(" ￥"+t._s(t.currentSpec.price)+" "),r("p",{staticStyle:{"font-size":"14px",color:"#bbb"}},[t._v("包装费:￥ "+t._s(t.currentSpec.packageFee))])]):t._e(),r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",disabled:!t.showPrice(),circle:"",size:"mini"},on:{click:t.intoCart}})],1)],1),r("el-divider")],1)},v=[],b=r("e9c0"),w=r("3b6a"),y={props:["product","shopId"],data:function(){return{choosedSpec:"",currentSpec:{}}},methods:{showPrice:function(){return this.choosedSpec},getPriceRange:function(t){var e=b["a"].getProductPriceRange(t);return e.lowPrice===e.highPrice?e.lowPrice:e.lowPrice+"-"+e.highPrice},handleSpecClick:function(t){this.currentSpec=t},intoCart:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w["a"].addProduct({shopId:t.shopId,productId:t.product.productId,specId:t.currentSpec.specId,quantity:1});case 3:t.$message.success(t.choosedSpec+"加入购物车成功"),t.$store.commit("updateLastProductAddTime"),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),t.$message.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}}},S=y,k=(r("412f"),Object(l["a"])(S,m,v,!1,null,"a0b4d436",null)),C=k.exports,_={props:["shopId"],data:function(){return{productList:[],productSpecMap:{},productChoosedSpecMap:{},categoryList:[]}},computed:{categoryActiveName:function(){return this.categoryList[0]?this.categoryList[0].categoryId+"":null}},components:{ProductItem:C},methods:{handleCategoryTabClick:function(t){this.getProductList(t.name)},getProductList:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,g["a"].getProductList(e.shopId,t);case 3:e.productList=r.sent,r.next=10;break;case 6:r.prev=6,r.t0=r["catch"](0),console.error(r.t0),e.$message.error(r.t0.message);case 10:case"end":return r.stop()}}),r,null,[[0,6]])})))()},refreshProductList:function(){this.categoryActiveName&&this.getProductList(this.categoryActiveName)},getProductCategory:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g["a"].getShopProductCategory(t.shopId);case 3:t.categoryList=e.sent,t.refreshProductList(),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),t.$message.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}},mounted:function(){},created:function(){this.getProductCategory()}},x=_,P=(r("0afc"),Object(l["a"])(x,d,h,!1,null,"3e5e8bee",null)),O=P.exports,j=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"shop-chat"},[r("el-dialog",{attrs:{visible:t.$store.state.shopChatShow,width:"570px"},on:{close:t.closeDialog}},[r("JwChat-index",{attrs:{taleList:t.list,toolConfig:t.config,config:t.config,scrollType:"scroll"},on:{enter:t.handleEnter},model:{value:t.msg,callback:function(e){t.msg=e},expression:"msg"}},[r("div",{staticStyle:{"margin-left":"460px"},attrs:{slot:"header"},slot:"header"},[r("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-close"},on:{click:t.closeDialog}})],1),r("JwChat-rightbox",{attrs:{config:t.rightConfig}})],1)],1)],1)},L=[],E={data:function(){return{msg:"",list:[{date:(new Date).toLocaleDateString()+(new Date).toLocaleTimeString(),text:{text:"您好, 欢迎光临黄焖鸡米饭"},mine:!1,name:"黄焖鸡米饭",img:"/imgs/shop_logos/kafei.jpg"}],config:{img:"/imgs/shop_logos/kafei.jpg",name:"黄焖鸡米饭",dept:"为生活增添点快乐",callback:this.headerEvent},rightConfig:{listTip:"当前在线客服",tip:"店铺公告",list:[{name:"黄焖鸡米饭①号客服",img:"/imgs/shop_logos/kafei.jpg"},{name:"黄焖鸡米饭②号客服",img:"/imgs/shop_logos/kafei.jpg"},{name:"黄焖鸡米饭③号客服",img:"/imgs/shop_logos/kafei.jpg"}]}}},methods:{closeDialog:function(){this.$store.state.shopChatShow&&this.$store.commit("toggleShopChatShow")},handleEnter:function(){this.list.push({date:(new Date).toLocaleDateString()+(new Date).toLocaleTimeString(),img:this.$store.state.user.info.avatar,name:this.$store.state.user.info.username,mine:!0,text:{text:this.msg}})}}},I=E,R=(r("f4f7"),Object(l["a"])(I,j,L,!1,null,null,null)),T=R.exports,$=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-drawer",{attrs:{title:"购物车","with-header":!1,visible:t.$store.state.cartShow,direction:"rtl"},on:{"update:visible":function(e){return t.$set(t.$store.state,"cartShow",e)}}},[r("el-card",{staticClass:"cart-card"},[r("div",{staticClass:"cart-header",attrs:{slot:"header"},slot:"header"},[r("h2",[t._v("购物车")]),r("span",{staticClass:"amount"},[t._v("￥ "+t._s(t.productTotalAmount)+" (不含包装费)")]),r("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"mini"}},[t._v("清空")])],1),r("ul",{staticClass:"cart-list"},t._l(t.productList,(function(e){return r("li",{key:e.productId+"-"+e.specId,staticClass:"cart-list-item"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[r("el-image",{attrs:{src:e.productImg,fit:"cover"}})],1),r("el-col",{attrs:{span:18}},[r("el-row",[r("el-col",{attrs:{span:14}},[r("h3",[t._v(t._s(e.productName))]),r("span",[t._v(t._s(e.specName))]),r("h1",{staticClass:"product-price"},[t._v("￥"+t._s(e.productPrice))])]),r("el-col",{attrs:{span:10}},[r("el-input-number",{staticStyle:{width:"100px","margin-top":"20px"},attrs:{label:"描述文字",size:"mini"},model:{value:e.productQuantity,callback:function(r){t.$set(e,"productQuantity",r)},expression:"item.productQuantity"}})],1)],1)],1)],1),r("el-divider")],1)})),0),r("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"success",size:"medium"},on:{click:t.handleSettlementClick}},[t._v("结算")])],1)],1)},N=[],D={props:["cartShow","shopId"],data:function(){return{productList:[]}},computed:{lastProductAddTime:function(){return this.$store.state.lastProductAddTime},productTotalAmount:function(){return b["a"].calcProductTotalAmount(this.productList)}},watch:{lastProductAddTime:function(){this.getProductList()}},methods:{getProductList:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w["a"].getProductList(t.shopId);case 3:t.productList=e.sent,t.$emit("loadComplete"),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),t.$message.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},getCartTotal:function(){return w["a"].getCartTotal(this.productList)},getProductListLocal:function(){return this.productList},handleSettlementClick:function(){this.$store.commit("toggleCart"),this.$emit("handle-settlement")}},created:function(){this.getProductList()}},z=D,A=(r("d1ec"),Object(l["a"])(z,$,N,!1,null,"f10800ba",null)),F=A.exports,J=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:18}},[r("el-tag",{staticClass:"eval-tag",attrs:{type:"primary",effect:-1==t.currentEval?"dark":"light"},on:{click:function(e){return t.handleTagClick(-1)}}},[t._v("全部评价("+t._s(t.allEvalSum)+")")]),t._l(t.shopEval.wordCloud,(function(e){return r("el-tag",{key:e.id,staticClass:"eval-tag",attrs:{type:e.positive?"primary":"info",effect:t.currentEval===e.id?"dark":"light"},on:{click:function(r){return t.handleTagClick(e.id)}}},[t._v(t._s(e.content)+"("+t._s(e.count)+")")])})),r("el-divider"),r("ul",{staticClass:"eval-list"},t._l(t.evalList,(function(e){return r("li",{key:e.evalId,staticClass:"eval-list-item"},[r("el-row",[r("el-col",{attrs:{span:2}},[r("el-avatar",[t._v(t._s(e.nickName))])],1),r("el-col",{attrs:{span:22}},[r("span",{staticClass:"eval-date"},[t._v(t._s(t.calcDate(e.createTime)))]),r("h3",[t._v(t._s(e.phone))]),r("el-rate",{attrs:{value:parseFloat(e.ranking),disabled:""}}),r("p",[t._v(t._s(e.content))]),r("ul",{staticClass:"img-list"},t._l(e.imgList,(function(t){return r("li",{key:t+Math.random()},[r("el-image",{attrs:{src:t,"preview-src-list":e.imgList,fit:"cover"}})],1)})),0)],1)],1),r("el-divider")],1)})),0),r("el-pagination",{staticStyle:{"text-align":"center"},attrs:{background:"","current-page":t.evalPage,"page-sizes":[2,10,20,30],"page-size":t.evalPageSize,layout:"prev, pager, next",total:t.evalTotal},on:{"size-change":t.handleSizeChanged,"current-change":t.handlePageChanged}})],2),r("el-col",{attrs:{span:6}},[r("el-card",{staticClass:"eval-info"},[r("h2",[t._v(t._s(t.shopEval.rating))]),r("p",{staticClass:"eval-avg"},[t._v("综合评价")]),r("p",{staticClass:"rating"},[t._v("高于周围"+t._s(t.shopEval.wingRate)+"%的商家")])])],1)],1)},Q=[],M=r("c1df"),B=r.n(M),Y={props:["shopId"],data:function(){return{shopEval:{},evalList:[],currentEval:-1,evalPage:1,evalPageSize:10,evalTotal:0}},computed:{allEvalSum:function(){if(!this.shopEval.wordCloud)return 0;for(var t=0,e=0;e<this.shopEval.wordCloud.length;e++)t+=this.shopEval.wordCloud[e].count;return t}},methods:{getShopEval:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g["a"].getShopEval(t.shopId);case 3:r=e.sent,t.shopEval=r,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),t.$message.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},getShopEvalList:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g["a"].getShopEvalList({shopId:t.shopId,tagId:t.currentEval,page:t.evalPage,size:t.evalPageSize});case 3:r=e.sent,t.evalList=r.data,t.evalTotal=r.total,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$message.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},calcDate:function(t){return B()(t,"YYYYMMDD").fromNow()},handlePageChanged:function(t){this.evalPage=t,this.getShopEvalList()},handleSizeChanged:function(t){this.evalPageSize=t,this.getShopEvalList()},handleTagClick:function(t){this.currentEval=t,this.getShopEvalList()}},created:function(){this.getShopEval(),this.getShopEvalList()}},q=Y,H=(r("5c78"),Object(l["a"])(q,J,Q,!1,null,"5f211904",null)),W=H.exports,G={data:function(){return{activeName:"product",cartShow:!0,shopId:this.$route.params.shopId,shopInfo:{},cartTotal:0}},components:{ShopHeader:f,ShopProduct:O,ShopCart:F,ShopEval:W,ShopChat:T},computed:{lastProductAddTime:function(){return this.$store.state.lastProductAddTime}},watch:{lastProductAddTime:function(){this.cartTotal=this.$refs.shopCart.getCartTotal()}},methods:{getShopInfo:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g["a"].getShopInfo(t.shopId);case 3:r=e.sent,t.shopInfo=r,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),t.$message.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},handleCartLoadComplete:function(){this.cartTotal=this.$refs.shopCart.getCartTotal()},handleSettlementClick:function(){this.$store.commit("setConfirmOrderData",{shopInfo:this.shopInfo,productList:this.$refs.shopCart.getProductListLocal()}),this.$router.push({name:"confirmOrder"})}},created:function(){this.getShopInfo()}},K=G,U=(r("2ce3"),Object(l["a"])(K,a,n,!1,null,"8b3d500c",null));e["default"]=U.exports},"2ce3":function(t,e,r){"use strict";r("a1d8")},"3b6a":function(t,e,r){"use strict";r("4160"),r("159b"),r("96cf");var a=r("1da1"),n=r("d4ec"),c=r("bee2"),s=r("27de"),o=function(){function t(){Object(n["a"])(this,t)}return Object(c["a"])(t,[{key:"addProduct",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].addProductIntoCart(e);case 2:if(r=t.sent,r.success){t.next=5;break}throw new Error("加入购物车失败:"+r.msg);case 5:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getProductList",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].getCartProductList(e);case 2:if(r=t.sent,r.success){t.next=5;break}throw new Error("获取购物车商品列表失败:"+r.msg);case 5:return t.abrupt("return",r.data);case 6:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getCartTotal",value:function(t){if(!t)return 0;var e=0;return t.forEach((function(t){e+=t.productQuantity})),e}},{key:"clearCart",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].clearCart(e);case 2:return r=t.sent,t.abrupt("return",r.success);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}();e["a"]=new o},"412f":function(t,e,r){"use strict";r("4566")},4566:function(t,e,r){},"4de4":function(t,e,r){"use strict";var a=r("23e7"),n=r("b727").filter,c=r("1dde"),s=r("ae40"),o=c("filter"),i=s("filter");a({target:"Array",proto:!0,forced:!o||!i},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},5530:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b");function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}},"5c78":function(t,e,r){"use strict";r("6d25")},"6d25":function(t,e,r){},"746f":function(t,e,r){var a=r("428f"),n=r("5135"),c=r("e538"),s=r("9bf2").f;t.exports=function(t){var e=a.Symbol||(a.Symbol={});n(e,t)||s(e,t,{value:c.f(t)})}},a1d8:function(t,e,r){},a4d3:function(t,e,r){"use strict";var a=r("23e7"),n=r("da84"),c=r("d066"),s=r("c430"),o=r("83ab"),i=r("4930"),u=r("fdbf"),l=r("d039"),p=r("5135"),f=r("e8b5"),d=r("861d"),h=r("825a"),g=r("7b0b"),m=r("fc6a"),v=r("c04e"),b=r("5c6c"),w=r("7c73"),y=r("df75"),S=r("241c"),k=r("057f"),C=r("7418"),_=r("06cf"),x=r("9bf2"),P=r("d1e7"),O=r("9112"),j=r("6eeb"),L=r("5692"),E=r("f772"),I=r("d012"),R=r("90e3"),T=r("b622"),$=r("e538"),N=r("746f"),D=r("d44e"),z=r("69f3"),A=r("b727").forEach,F=E("hidden"),J="Symbol",Q="prototype",M=T("toPrimitive"),B=z.set,Y=z.getterFor(J),q=Object[Q],H=n.Symbol,W=c("JSON","stringify"),G=_.f,K=x.f,U=k.f,V=P.f,X=L("symbols"),Z=L("op-symbols"),tt=L("string-to-symbol-registry"),et=L("symbol-to-string-registry"),rt=L("wks"),at=n.QObject,nt=!at||!at[Q]||!at[Q].findChild,ct=o&&l((function(){return 7!=w(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a}))?function(t,e,r){var a=G(q,e);a&&delete q[e],K(t,e,r),a&&t!==q&&K(q,e,a)}:K,st=function(t,e){var r=X[t]=w(H[Q]);return B(r,{type:J,tag:t,description:e}),o||(r.description=e),r},ot=u?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof H},it=function(t,e,r){t===q&&it(Z,e,r),h(t);var a=v(e,!0);return h(r),p(X,a)?(r.enumerable?(p(t,F)&&t[F][a]&&(t[F][a]=!1),r=w(r,{enumerable:b(0,!1)})):(p(t,F)||K(t,F,b(1,{})),t[F][a]=!0),ct(t,a,r)):K(t,a,r)},ut=function(t,e){h(t);var r=m(e),a=y(r).concat(ht(r));return A(a,(function(e){o&&!pt.call(r,e)||it(t,e,r[e])})),t},lt=function(t,e){return void 0===e?w(t):ut(w(t),e)},pt=function(t){var e=v(t,!0),r=V.call(this,e);return!(this===q&&p(X,e)&&!p(Z,e))&&(!(r||!p(this,e)||!p(X,e)||p(this,F)&&this[F][e])||r)},ft=function(t,e){var r=m(t),a=v(e,!0);if(r!==q||!p(X,a)||p(Z,a)){var n=G(r,a);return!n||!p(X,a)||p(r,F)&&r[F][a]||(n.enumerable=!0),n}},dt=function(t){var e=U(m(t)),r=[];return A(e,(function(t){p(X,t)||p(I,t)||r.push(t)})),r},ht=function(t){var e=t===q,r=U(e?Z:m(t)),a=[];return A(r,(function(t){!p(X,t)||e&&!p(q,t)||a.push(X[t])})),a};if(i||(H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=R(t),r=function(t){this===q&&r.call(Z,t),p(this,F)&&p(this[F],e)&&(this[F][e]=!1),ct(this,e,b(1,t))};return o&&nt&&ct(q,e,{configurable:!0,set:r}),st(e,t)},j(H[Q],"toString",(function(){return Y(this).tag})),j(H,"withoutSetter",(function(t){return st(R(t),t)})),P.f=pt,x.f=it,_.f=ft,S.f=k.f=dt,C.f=ht,$.f=function(t){return st(T(t),t)},o&&(K(H[Q],"description",{configurable:!0,get:function(){return Y(this).description}}),s||j(q,"propertyIsEnumerable",pt,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!i,sham:!i},{Symbol:H}),A(y(rt),(function(t){N(t)})),a({target:J,stat:!0,forced:!i},{for:function(t){var e=String(t);if(p(tt,e))return tt[e];var r=H(e);return tt[e]=r,et[r]=e,r},keyFor:function(t){if(!ot(t))throw TypeError(t+" is not a symbol");if(p(et,t))return et[t]},useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),a({target:"Object",stat:!0,forced:!i,sham:!o},{create:lt,defineProperty:it,defineProperties:ut,getOwnPropertyDescriptor:ft}),a({target:"Object",stat:!0,forced:!i},{getOwnPropertyNames:dt,getOwnPropertySymbols:ht}),a({target:"Object",stat:!0,forced:l((function(){C.f(1)}))},{getOwnPropertySymbols:function(t){return C.f(g(t))}}),W){var gt=!i||l((function(){var t=H();return"[null]"!=W([t])||"{}"!=W({a:t})||"{}"!=W(Object(t))}));a({target:"JSON",stat:!0,forced:gt},{stringify:function(t,e,r){var a,n=[t],c=1;while(arguments.length>c)n.push(arguments[c++]);if(a=e,(d(e)||void 0!==t)&&!ot(t))return f(e)||(e=function(t,e){if("function"==typeof a&&(e=a.call(this,t,e)),!ot(e))return e}),n[1]=e,W.apply(null,n)}})}H[Q][M]||O(H[Q],M,H[Q].valueOf),D(H,J),I[F]=!0},b0c0:function(t,e,r){var a=r("83ab"),n=r("9bf2").f,c=Function.prototype,s=c.toString,o=/^\s*function ([^ (]*)/,i="name";a&&!(i in c)&&n(c,i,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(t){return""}}})},b64b:function(t,e,r){var a=r("23e7"),n=r("7b0b"),c=r("df75"),s=r("d039"),o=s((function(){c(1)}));a({target:"Object",stat:!0,forced:o},{keys:function(t){return c(n(t))}})},bb5b:function(t,e,r){"use strict";r("fdca")},cb41:function(t,e,r){},d1ec:function(t,e,r){"use strict";r("cb41")},dbb4:function(t,e,r){var a=r("23e7"),n=r("83ab"),c=r("56ef"),s=r("fc6a"),o=r("06cf"),i=r("8418");a({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,r,a=s(t),n=o.f,u=c(a),l={},p=0;while(u.length>p)r=n(a,e=u[p++]),void 0!==r&&i(l,e,r);return l}})},e439:function(t,e,r){var a=r("23e7"),n=r("d039"),c=r("fc6a"),s=r("06cf").f,o=r("83ab"),i=n((function(){s(1)})),u=!o||i;a({target:"Object",stat:!0,forced:u,sham:!o},{getOwnPropertyDescriptor:function(t,e){return s(c(t),e)}})},e538:function(t,e,r){var a=r("b622");e.f=a},e9c0:function(t,e,r){"use strict";r("4160"),r("159b");var a=r("d4ec"),n=r("bee2"),c=function(){function t(){Object(a["a"])(this,t)}return Object(n["a"])(t,[{key:"getProductPriceRange",value:function(t){var e=t.productSpecList[0].price,r=t.productSpecList[0].price;return t.productSpecList.forEach((function(t){t.price<r&&(r=t.price),t.price>e&&(e=t.price)})),{highPrice:e,lowPrice:r}}},{key:"calcTotalPackageFee",value:function(t){if(!t)return 0;var e=0;return t.forEach((function(t){e+=t.packageFee})),e}},{key:"calcTotalAmount",value:function(t){if(!t)return 0;var e=0;return t.forEach((function(t){e+=t.productPrice*t.productQuantity})),e+=this.calcTotalPackageFee(t),e}},{key:"calcProductTotalAmount",value:function(t){return this.calcTotalAmount(t)-this.calcTotalPackageFee(t)}}]),t}();e["a"]=new c},f4f7:function(t,e,r){"use strict";r("fae3")},fae3:function(t,e,r){},fdca:function(t,e,r){}}]);
//# sourceMappingURL=chunk-3f82a7a3.faa61191.js.map