{"version":3,"sources":["webpack:///./src/components/home/LocationChooser.vue?98aa","webpack:///./src/components/home/MainHeader.vue?d283","webpack:///./src/components/home/LocationChooser.vue?f208","webpack:///src/components/home/LocationChooser.vue","webpack:///./src/components/home/LocationChooser.vue?bd32","webpack:///./src/components/home/LocationChooser.vue","webpack:///src/components/home/MainHeader.vue","webpack:///./src/components/home/MainHeader.vue?0f61","webpack:///./src/components/home/MainHeader.vue","webpack:///./src/service/StorageService.js","webpack:///./src/service/ConsumerService.js","webpack:///./src/components/home/MainHeader.vue?6f95"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","staticStyle","$store","state","user","login","info","avatar","on","changeAccount","handleLogout","slot","$event","commit","_s","location","locationChooserShow","staticRenderFns","querySearch","handleSelect","model","value","callback","$$v","input","expression","_l","item","key","data","hotCity","methods","cb","loadAll","$message","success","mounted","restaurants","component","components","LocationChooser","StorageService","window","localStorage","getItem","val","setItem","removeItem","ConsumerService","token","storageService","repository","getConsumerInfo","consumerInfo","Error","msg","username","password","putItem","params","register","getConsumerDefaultDelivery","remove","fileList","length","formData","FormData","append","uploadAvatar","userInfo","updateUserInfo","old","newPassword","updatePassword"],"mappings":"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","file":"js/chunk-0d519a34.e3982c8d.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationChooser.vue?vue&type=style&index=0&id=61a12465&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('el-row',[_c('el-col',{staticClass:\"logo-wrapper\",attrs:{\"span\":4}},[_c('span',{staticClass:\"logo\"},[_vm._v(\"饱了吧 \")]),_c('img',{staticStyle:{\"width\":\"40px\",\"height\":\"40px\"},attrs:{\"src\":\"/imgs/logo.png\",\"alt\":\"\"}})]),_c('el-col',{attrs:{\"span\":16}},[_c('el-menu',{attrs:{\"default-active\":'takeaway',\"mode\":\"horizontal\",\"background-color\":\"#3190e8\",\"text-color\":\"#fff\",\"active-text-color\":\"#ffd04b\",\"router\":true}},[_c('el-menu-item',{staticClass:\"el-icon-dish\",attrs:{\"index\":\"/takeaway\"}},[_vm._v(\" 外卖\")]),_c('el-menu-item',{staticClass:\"el-icon-search\",attrs:{\"index\":\"/search\"}},[_vm._v(\" 搜索\")]),_c('el-menu-item',{staticClass:\"el-icon-s-order\",attrs:{\"index\":\"/order\",\"disabled\":!_vm.$store.state.user.login}},[_vm._v(\" 订单\")]),_c('el-menu-item',{staticClass:\"el-icon-user\",attrs:{\"index\":\"/my\",\"disabled\":!_vm.$store.state.user.login}},[_vm._v(\" 我的\")]),_c('el-menu-item',{staticClass:\"el-icon-goods\",attrs:{\"index\":\"/pointsMall\",\"disabled\":!_vm.$store.state.user.login}},[_vm._v(\" 积分商城\")])],1)],1),_c('el-col',{attrs:{\"span\":4}},[(!_vm.$store.state.user.login)?_c('span',{staticClass:\"login-tip\",on:{\"click\":function($event){return _vm.$store.commit('toggleLoginPanel')}}},[_vm._v(\"登录/注册\")]):_c('el-popover',{attrs:{\"placement\":\"bottom\",\"title\":\"设置\",\"width\":\"200\",\"trigger\":\"click\"}},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('el-avatar',{attrs:{\"src\":_vm.$store.state.user.info.avatar}}),_c('p',[_vm._v(\"蔡徐坤\")]),_c('p',[_vm._v(\"您有 \"),_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(\"1\")]),_vm._v(\" 条新消息\")]),_c('div',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.changeAccount}},[_vm._v(\"切换账号\")]),_c('el-button',{attrs:{\"type\":\"warning\",\"size\":\"mini\"},on:{\"click\":_vm.handleLogout}},[_vm._v(\"注销\")])],1)],1),_c('el-avatar',{staticClass:\"avatar\",attrs:{\"slot\":\"reference\",\"src\":_vm.$store.state.user.info.avatar},slot:\"reference\"})],1),_c('span',{staticClass:\"el-icon-location location\",on:{\"click\":function($event){return _vm.$store.commit('toggleLocationChooser')}}},[_vm._v(\" \"+_vm._s(_vm.$store.state.location)+\" \"),(!_vm.$store.state.locationChooserShow)?_c('span',{staticClass:\"el-icon-caret-bottom\"}):_c('span',{staticClass:\"el-icon-caret-top\"})])],1)],1),_c('location-chooser')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-dialog',{attrs:{\"title\":\"选择城市\",\"visible\":_vm.$store.state.locationChooserShow,\"width\":\"50%\"},on:{\"close\":function($event){return _vm.$store.commit('toggleLocationChooser')}}},[_c('el-autocomplete',{staticStyle:{\"width\":\"100%\"},attrs:{\"fetch-suggestions\":_vm.querySearch,\"placeholder\":\"请输入城市\",\"clearable\":\"\"},on:{\"select\":_vm.handleSelect},model:{value:(_vm.input),callback:function ($$v) {_vm.input=$$v},expression:\"input\"}}),_c('el-card',{staticStyle:{\"margin-top\":\"20px\"}},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"当前定位城市：\")]),_c('div',{staticClass:\"city\"},[_c('div',[_c('el-link',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleSelect({value:_vm.$store.state.location})}}},[_vm._v(_vm._s(_vm.$store.state.location))])],1)])]),_c('el-card',{staticStyle:{\"margin-top\":\"20px\"}},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_vm._v(\"热门城市\")]),_c('div',{staticClass:\"city\"},_vm._l((_vm.hotCity),function(item){return _c('div',{key:item},[_c('el-link',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleSelect({value:item})}}},[_vm._v(_vm._s(item))])],1)}),0)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-dialog\r\n      title=\"选择城市\"\r\n      :visible=\"$store.state.locationChooserShow\"\r\n      @close=\"$store.commit('toggleLocationChooser')\"\r\n      width=\"50%\">\r\n      <el-autocomplete\r\n        style=\"width:100%\"\r\n        v-model='input'\r\n        :fetch-suggestions='querySearch'\r\n        placeholder='请输入城市'\r\n        @select='handleSelect'\r\n        clearable\r\n      ></el-autocomplete>\r\n      <el-card  style=\"margin-top:20px\">\r\n        <div slot=\"header\">当前定位城市：</div>\r\n        <div class=\"city\">\r\n          <div><el-link type=\"primary\" @click=\"handleSelect({value:$store.state.location})\">{{$store.state.location}}</el-link></div>\r\n        </div>\r\n      </el-card>\r\n      <el-card style=\"margin-top:20px\">\r\n        <div slot=\"header\">热门城市</div>\r\n        <div class=\"city\">\r\n          <div v-for=\"item in hotCity\" :key=\"item\">\r\n            <el-link type=\"primary\" @click=\"handleSelect({value:item})\">{{item}}</el-link>\r\n          </div>\r\n        </div>\r\n      </el-card>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      input: '',\r\n      hotCity: ['北京', '上海', '广州', '深圳']\r\n    }\r\n  },\r\n  methods: {\r\n    querySearch (queryString, cb) {\r\n      // 调用 callback 返回建议列表的数据\r\n      cb(this.loadAll())\r\n    },\r\n    loadAll () {\r\n      return [\r\n        { value: '泉州' },\r\n        { value: '福州' }\r\n      ]\r\n    },\r\n    handleSelect (item) {\r\n      this.$message.success(item.value)\r\n    }\r\n  },\r\n  mounted () {\r\n    this.restaurants = this.loadAll()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .city {\r\n    display: flex;\r\n    div {\r\n      flex: 0 0 10%;\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationChooser.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LocationChooser.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LocationChooser.vue?vue&type=template&id=61a12465&scoped=true&\"\nimport script from \"./LocationChooser.vue?vue&type=script&lang=js&\"\nexport * from \"./LocationChooser.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LocationChooser.vue?vue&type=style&index=0&id=61a12465&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61a12465\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div class=\"container\">\r\n        <el-row>\r\n        <el-col :span=\"4\" class=\"logo-wrapper\">\r\n          <span class=\"logo\">饱了吧\r\n          </span>\r\n          <img src=\"/imgs/logo.png\" alt=\"\" style=\"width:40px;height:40px\"/>\r\n        </el-col>\r\n        <el-col :span=\"16\">\r\n          <el-menu :default-active=\"'takeaway'\"\r\n                    mode=\"horizontal\"\r\n                    background-color=\"#3190e8\"\r\n                    text-color=\"#fff\"\r\n                    active-text-color=\"#ffd04b\"\r\n                    :router=\"true\"\r\n                    >\r\n            <el-menu-item index=\"/takeaway\" class=\"el-icon-dish\"> 外卖</el-menu-item>\r\n            <el-menu-item index=\"/search\" class=\"el-icon-search\"> 搜索</el-menu-item>\r\n            <el-menu-item index=\"/order\" class=\"el-icon-s-order\" :disabled=\"!$store.state.user.login\"> 订单</el-menu-item>\r\n            <el-menu-item index=\"/my\" class=\"el-icon-user\" :disabled=\"!$store.state.user.login\"> 我的</el-menu-item>\r\n            <el-menu-item index=\"/pointsMall\" class=\"el-icon-goods\" :disabled=\"!$store.state.user.login\"> 积分商城</el-menu-item>\r\n          </el-menu>\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n            <span class=\"login-tip\" @click=\"$store.commit('toggleLoginPanel')\" v-if=\"!$store.state.user.login\">登录/注册</span>\r\n            <el-popover\r\n              v-else\r\n              placement=\"bottom\"\r\n              title=\"设置\"\r\n              width=\"200\"\r\n              trigger=\"click\">\r\n              <div style=\"text-align:center\">\r\n                <el-avatar :src=\"$store.state.user.info.avatar\"></el-avatar>\r\n                <p>蔡徐坤</p>\r\n                <p>您有 <a href=\"#\">1</a> 条新消息</p>\r\n                <div>\r\n                  <el-button type=\"primary\" size=\"mini\" @click=\"changeAccount\">切换账号</el-button>\r\n                  <el-button type=\"warning\" size=\"mini\" @click=\"handleLogout\">注销</el-button>\r\n                </div>\r\n              </div>\r\n              <el-avatar :src=\"$store.state.user.info.avatar\" class=\"avatar\" slot=\"reference\"></el-avatar>\r\n            </el-popover>\r\n            <span class=\"el-icon-location location\" @click=\"$store.commit('toggleLocationChooser')\"> {{$store.state.location}}\r\n              <span class=\"el-icon-caret-bottom\" v-if=\"!$store.state.locationChooserShow\"></span>\r\n              <span class=\"el-icon-caret-top\" v-else></span>\r\n            </span>\r\n        </el-col>\r\n      </el-row>\r\n      <location-chooser></location-chooser>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport LocationChooser from './LocationChooser'\r\nimport consumerService from '../../service/ConsumerService'\r\nexport default {\r\n  data () {\r\n    return { }\r\n  },\r\n  async created () {\r\n    const isLogin = await consumerService.isLogin()\r\n    this.$store.commit('setLoginState', isLogin)\r\n    if (isLogin) {\r\n      const userInfo = await consumerService.getConsumerInfo()\r\n      this.$store.commit('setUserInfo', userInfo)\r\n    }\r\n  },\r\n  methods: {\r\n    handleLogout () {\r\n      consumerService.logout()\r\n      this.$store.commit('setUserLoginStatus', false)\r\n      this.$message.success('注销成功')\r\n    },\r\n    changeAccount () {\r\n      this.handleLogout()\r\n      this.$store.commit('toggleLoginPanel')\r\n    }\r\n  },\r\n  components: {\r\n    LocationChooser\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .logo-wrapper {\r\n    padding-left: 40px;\r\n  }\r\n  .login-tip {\r\n    font-size:14px;\r\n    color:white;\r\n    margin-right:20px;\r\n    cursor: pointer;\r\n  }\r\n  .avatar {\r\n    vertical-align: middle;\r\n    margin-right: 10px;\r\n    cursor: pointer;\r\n  }\r\n  .logo {\r\n    height: 56px;\r\n    line-height: 56px;\r\n    color: #fff;\r\n    font-size: 20px;\r\n    text-shadow: 2px 2px 3px rgba(0,0,0,.5);\r\n  }\r\n  .container {\r\n    padding: 0 10px;\r\n    background-color: #3190e8;\r\n  }\r\n  .location {\r\n    cursor: pointer;\r\n    height: 56px;\r\n    line-height: 56px;\r\n    font-size: 16px;\r\n    color:white;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainHeader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainHeader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MainHeader.vue?vue&type=template&id=76ceea8b&scoped=true&\"\nimport script from \"./MainHeader.vue?vue&type=script&lang=js&\"\nexport * from \"./MainHeader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MainHeader.vue?vue&type=style&index=0&id=76ceea8b&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"76ceea8b\",\n  null\n  \n)\n\nexport default component.exports","class StorageService {\r\n  getItem (key) {\r\n    return window.localStorage.getItem(key)\r\n  }\r\n\r\n  putItem (key, val) {\r\n    window.localStorage.setItem(key, val)\r\n  }\r\n\r\n  remove (key) {\r\n    window.localStorage.removeItem(key)\r\n  }\r\n}\r\n\r\nexport default new StorageService()\r\n","import repository from '../repository'\r\nimport storageService from './StorageService'\r\nclass ConsumerService {\r\n  // 判断是否登录\r\n  async isLogin () {\r\n    const token = storageService.getItem('token')\r\n    if (!token) {\r\n      return false\r\n    }\r\n    const data = await repository.getConsumerInfo()\r\n    return data.success\r\n  }\r\n\r\n  // 获取当前登录用户信息（会对信息进行缓存）\r\n  async getConsumerInfo () {\r\n    if (this.consumerInfo) {\r\n      return this.consumerInfo\r\n    }\r\n    const data = await repository.getConsumerInfo()\r\n    if (!data.success) {\r\n      throw new Error('获取用户信息失败:' + data.msg)\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  // 进行登录\r\n  async login (username, password) {\r\n    const data = await repository.login(username, password)\r\n    if (!data.success) {\r\n      throw new Error('登录失败:' + data.msg)\r\n    }\r\n    storageService.putItem('token', data.data.token)\r\n    return data.data\r\n  }\r\n\r\n  // 进行注册\r\n  async register (params) {\r\n    const data = await repository.register(params)\r\n    if (!data.success) {\r\n      throw new Error('注册失败:' + data.msg)\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  // 获取当前登录用户默认收货信息\r\n  async getDefaultDelivery () {\r\n    const data = await repository.getConsumerDefaultDelivery()\r\n    if (!data.success) {\r\n      throw new Error('获取默认收货信息失败:' + data.msg)\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  // 注销\r\n  logout () {\r\n    storageService.remove('token')\r\n  }\r\n\r\n  async uploadAvatar (fileList) {\r\n    if (!fileList || fileList.length === 0) {\r\n      throw new Error('上传头像失败:没有选择图片')\r\n    }\r\n    const formData = new FormData()\r\n    formData.append('file', fileList[0])\r\n    const data = await repository.uploadAvatar(formData)\r\n    if (!data.success) {\r\n      throw new Error('上传头像失败:' + data.msg)\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  async updateUserInfo (userInfo) {\r\n    const data = await repository.updateUserInfo(userInfo)\r\n    if (!data.success) {\r\n      throw new Error('保存用户信息失败:' + data.msg)\r\n    }\r\n    return true\r\n  }\r\n\r\n  async updatePassword (old, newPassword) {\r\n    const data = await repository.updatePassword(old, newPassword)\r\n    if (!data.success) {\r\n      throw new Error('修改密码失败:' + data.msg)\r\n    }\r\n    return true\r\n  }\r\n}\r\nexport default new ConsumerService()\r\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainHeader.vue?vue&type=style&index=0&id=76ceea8b&lang=less&scoped=true&\""],"sourceRoot":""}