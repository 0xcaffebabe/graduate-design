(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18be4812"],{"0578":function(t,e,a){},"1ce2":function(t,e,a){"use strict";a("4dd6")},2126:function(t,e,a){},"2d01":function(t,e,a){"use strict";a("4160"),a("d81d"),a("159b"),a("96cf");var r=a("1da1"),i=a("d4ec"),s=a("bee2"),n=a("c1df"),o=a.n(n),l=a("27de");o.a.locale("zh-cn");var c=function(){function t(){Object(i["a"])(this,t)}return Object(s["a"])(t,[{key:"getOrderDeliveryTime",value:function(){return o()().add(1,"hours").calendar()}},{key:"makeOrder",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=JSON.parse(JSON.stringify(e)),e.deliveryId){t.next=3;break}throw new Error("下单失败:收货信息ID为空");case 3:if(e.productList){t.next=5;break}throw new Error("下单失败:下单商品列表为空");case 5:return e.productList=e.productList.map((function(t){return{productId:t.productId,specId:t.specId,quantity:t.productQuantity}})),t.next=8,l["a"].makeOrder(e);case 8:if(a=t.sent,a.success){t.next=11;break}throw new Error("下单失败:"+a.msg);case 11:return t.abrupt("return",a.data);case 12:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getOrderList",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l["a"].getOrderList(e,a);case 2:if(r=t.sent,r.success){t.next=5;break}throw new Error("获取订单列表失败:"+r.msg);case 5:return t.abrupt("return",r.data);case 6:case"end":return t.stop()}}),t)})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"getOrderDetail",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l["a"].getOrderDetail(e);case 2:if(a=t.sent,a.success){t.next=5;break}throw new Error("获取订单详情失败:"+a.msg);case 5:return a.data&&a.data.productList&&a.data.productList.forEach((function(t){t.specId=t.productSpec})),t.abrupt("return",a.data);case 7:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getOrderStatus",value:function(t){return 0===t.orderStatus?"未处理":1===t.orderStatus?"已处理":2===t.orderStatus?"配送中":3===t.orderStatus?"已完结":4===t.orderStatus?"已作废":void 0}}]),t}();e["a"]=new c},"4dd6":function(t,e,a){},"4fdb":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"order-item"},[a("el-row",[a("el-col",{attrs:{span:2}},[a("div",{staticClass:"shop-img",on:{click:function(e){return t.$router.push("/shop/1")}}},[a("el-avatar",{attrs:{src:t.order.shopLogo,fit:"cover",shape:"square",size:64}})],1)]),a("el-col",{attrs:{span:22}},[a("span",{staticClass:"order-status"},[t._v(t._s(t.getOrderStatus(t.order)))]),a("h4",{staticClass:"shop-name",on:{click:function(e){return t.$router.push("/shop/"+t.order.shopId)}}},[t._v(t._s(t.order.shopName)+" "),a("span",{staticClass:"el-icon-arrow-right"})]),a("p",{staticClass:"order-date"},[t._v(t._s(t.order.createTime))]),a("el-divider"),a("el-row",[a("el-col",{staticClass:"order-detail",attrs:{span:18}},[a("ul",{staticClass:"order-img-list"},t._l(t.order.imgList,(function(e){return a("li",{key:e+Math.random(),staticClass:"order-img-item"},[a("el-image",{attrs:{fit:"cover",src:e,"preview-src-list":t.order.imgList}})],1)})),0)]),a("el-col",{attrs:{span:6}},[a("p",{staticClass:"order-price"},[t._v("￥"+t._s(t.order.orderAmount))]),a("p",{staticClass:"order-name"},[t._v(t._s(t.order.orderName))])])],1),"配送中"===t.getOrderStatus(t.order)&&t.editable?a("div",{staticClass:"amap-box-wrapper"},[a("el-amap",{staticClass:"amap-box",attrs:{zoom:20,center:[118.636466,24.8736]}},[a("el-amap-marker",{attrs:{vid:"component-shop-marker",position:[118.637466,24.8734]}}),a("el-amap-text",{attrs:{vid:"component-shop-text",position:[118.637466,24.8734],text:"店铺"}}),a("el-amap-marker",{attrs:{vid:"component-rider-marker",position:[118.637066,24.8737]}}),a("el-amap-text",{attrs:{vid:"component-rider-text",position:[118.637066,24.8737],text:"骑手"}})],1)],1):t._e(),"已完结"===t.getOrderStatus(t.order)&&t.editable?a("el-button",{staticStyle:{float:"right","margin-top":"5px","margin-left":"15px"},attrs:{size:"mini",type:"warning"},on:{click:t.showOrderEval}},[t._v("评价订单")]):t._e(),t.editable?a("el-button",{staticStyle:{float:"right","margin-top":"5px","margin-left":"15px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.$router.push("/shop/"+t.order.shopId)}}},[t._v("再来一单")]):t._e(),t.editable?a("el-button",{staticStyle:{float:"right","margin-top":"5px"},attrs:{size:"mini",type:"success"},on:{click:function(e){return t.showOrderDetail(t.order.orderId)}}},[t._v("订单详情")]):t._e()],1)],1),t.editable?a("order-eval"):t._e()],1)},i=[],s=a("2d01"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"订单评价",visible:t.$store.state.evalPaneShow,width:"30%"},on:{close:function(e){return t.$store.commit("closeEvalPaneShow")}}},[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-avatar",{attrs:{src:"/imgs/foods/huangmenji.jpg",fit:"cover",shape:"square",size:48}})],1),a("el-col",{attrs:{span:16}},[a("h4",{staticClass:"shop-name"},[t._v("黄焖鸡米饭 "),a("span",{staticClass:"el-icon-arrow-right"})])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"annoymous-wrapper"},[a("el-checkbox",{attrs:{label:"匿名评价"}})],1)])],1),a("div",{staticClass:"shop-rate-wrapper"},[a("div",{staticClass:"shop-main-rate"},[a("el-rate",{attrs:{colors:["#99A9BF","#F7BA2A","#FF9900"],"show-text":"","allow-half":""},model:{value:t.mainRate,callback:function(e){t.mainRate=e},expression:"mainRate"}})],1),t.showSubRate?a("div",{staticClass:"shop-package-rate"},[a("span",[t._v("包装 ")]),a("el-rate",{attrs:{colors:["#99A9BF","#F7BA2A","#FF9900"],"show-text":"","allow-half":""},model:{value:t.packageRate,callback:function(e){t.packageRate=e},expression:"packageRate"}})],1):t._e(),t.showSubRate?a("div",{staticClass:"shop-package-rate"},[a("span",[t._v("味道 ")]),a("el-rate",{attrs:{colors:["#99A9BF","#F7BA2A","#FF9900"],"show-text":"","allow-half":""},model:{value:t.tasteRate,callback:function(e){t.tasteRate=e},expression:"tasteRate"}})],1):t._e()]),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:"满意你就夸一夸"},model:{value:t.evalContent,callback:function(e){t.evalContent=e},expression:"evalContent"}}),a("el-upload",{staticClass:"upload",attrs:{action:"/upload","auto-upload":!1,"file-list":t.fileList,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("添加照片")])],1)],1),a("el-divider"),a("el-row",[a("el-col",{attrs:{span:4}},[a("el-avatar",{attrs:{src:"/imgs/rider.jpg",fit:"cover",shape:"square",size:48}})],1),a("el-col",{attrs:{span:14}},[a("h4",{staticClass:"shop-name"},[t._v("杨超锋 "),a("span",{staticClass:"fengniao-delivery"},[t._v("蜂鸟专送")])])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"annoymous-wrapper"},[a("span",{staticClass:"el-icon-question"},[t._v(" 已对骑手匿名")])])])],1),a("ul",{staticClass:"rider-eval-list"},[a("li",{staticClass:"rider-eval-item"},[a("span",{staticClass:"el-icon-heavy-rain rider-eval-icon",class:{active:"bad"===t.riderRate},on:{click:function(e){t.riderRate="bad"}}}),a("p",[t._v("非常差")])]),a("li",{staticClass:"rider-eval-item"},[a("span",{staticClass:"el-icon-sunrise rider-eval-icon",class:{active:"normal"===t.riderRate},on:{click:function(e){t.riderRate="normal"}}}),a("p",[t._v("一般")])]),a("li",{staticClass:"rider-eval-item"},[a("span",{staticClass:"el-icon-sunny rider-eval-icon",class:{active:"good"===t.riderRate},on:{click:function(e){t.riderRate="good"}}}),a("p",[t._v("超赞")])])]),a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:t.submitEval}},[t._v("提交评价")])],1)},o=[],l={data:function(){return{mainRate:0,packageRate:0,tasteRate:0,evalContent:"",fileList:[],riderRate:""}},methods:{beforeUpload:function(){return!1},submitEval:function(){this.$notify({title:"成功",message:"提交评价成功",type:"success"}),this.$store.commit("closeEvalPaneShow")}},computed:{showSubRate:function(){return 0!==this.mainRate}}},c=l,m=(a("b00a"),a("2877")),p=Object(m["a"])(c,n,o,!1,null,"58f9c856",null),u=p.exports,d={props:{order:{type:Object,required:!0},editable:{type:Boolean,required:!1,default:!0}},data:function(){return{}},methods:{getOrderStatus:function(t){return s["a"].getOrderStatus(t)},showOrderDetail:function(t){this.$emit("show-order-detail",t)},showOrderEval:function(t){this.$store.commit("toogleEvalPaneShow")}},components:{OrderEval:u}},f=d,h=(a("dc81"),Object(m["a"])(f,r,i,!1,null,"29e9547f",null));e["a"]=h.exports},b00a:function(t,e,a){"use strict";a("2126")},c6c9:function(t,e,a){},d81d:function(t,e,a){"use strict";var r=a("23e7"),i=a("b727").map,s=a("1dde"),n=a("ae40"),o=s("map"),l=n("map");r({target:"Array",proto:!0,forced:!o||!l},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},dc81:function(t,e,a){"use strict";a("0578")},e2f8:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",{attrs:{to:{path:"/my"}}},[t._v("我的")]),a("el-breadcrumb-item",[t._v("客服中心")])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("JwChat-index",{attrs:{taleList:t.list,toolConfig:t.config,config:t.config,scrollType:"scroll"},on:{enter:t.handleEnter},model:{value:t.msg,callback:function(e){t.msg=e},expression:"msg"}},[a("JwChat-rightbox",{attrs:{config:t.rightConfig}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[t._v(" 投诉列表 "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.$store.commit("toggleSubmitComplaintPane")}}},[t._v("发起投诉")])],1),a("ul",[a("li",[a("el-button",{staticStyle:{float:"right"},attrs:{effect:"dark",type:"info",size:"mini"},on:{click:t.showComplaintPane}},[t._v("未处理")]),a("h4",[t._v("关于店铺 黄焖鸡米饭 的投诉")]),a("el-divider")],1),a("li",[a("el-button",{staticStyle:{float:"right"},attrs:{effect:"dark",type:"success",size:"mini"},on:{click:t.showComplaintPane}},[t._v("处理中")]),a("h4",[t._v("关于店铺 阿牛很芒 的投诉")]),a("el-divider")],1),a("li",[a("el-button",{staticStyle:{float:"right"},attrs:{effect:"dark",type:"primary",size:"mini"},on:{click:t.showComplaintPane}},[t._v("已处理")]),a("h4",[t._v("关于店铺 网红奶茶店 的投诉")]),a("el-divider")],1),a("li",[a("el-button",{staticStyle:{float:"right"},attrs:{effect:"dark",type:"danger",size:"mini"},on:{click:t.showComplaintPane}},[t._v("被驳回")]),a("h4",[t._v("关于店铺 黄焖鸡米饭 的投诉")])],1)])])],1)],1),a("complaint-pane"),a("submit-complaint-pane")],1)},i=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"投诉详情",visible:t.$store.state.complaintPaneShow,width:"50%"},on:{close:function(e){return t.$store.commit("toggleComplaintPane")}}},[a("div",[a("el-form",{ref:"form",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"投诉订单"}},[a("el-tooltip",{attrs:{placement:"bottom-end",effect:"light"},scopedSlots:t._u([{key:"content",fn:function(){return[a("order-item",{staticStyle:{height:"288px",width:"1000px"},attrs:{order:t.order,editable:!1}})]},proxy:!0}])},[a("el-link",{attrs:{type:"primary"}},[t._v(" 399 288 600 456")])],1)],1),a("el-form-item",{attrs:{label:"投诉原因"}},[a("el-input",{attrs:{disabled:""},model:{value:t.complaint.reason,callback:function(e){t.$set(t.complaint,"reason",e)},expression:"complaint.reason"}})],1),a("el-form-item",{attrs:{label:"更多描述"}},[a("el-input",{attrs:{disabled:"",type:"textarea",rows:3},model:{value:t.complaint.description,callback:function(e){t.$set(t.complaint,"description",e)},expression:"complaint.description"}})],1),a("el-form-item",{attrs:{label:"图片证据"}},[a("ul",t._l(t.imgList,(function(t){return a("li",{key:t+Math.random(),staticClass:"order-img-item"},[a("el-image",{attrs:{fit:"cover",src:t,"preview-src-list":[t]}})],1)})),0)]),a("el-form-item",{attrs:{label:"处理状态"}},[a("el-timeline",[a("el-timeline-item",{key:1,attrs:{type:"danger",timestamp:"2020-11-18 20:00"}},[t._v("平台裁定, 驳回顾客投诉")]),a("el-timeline-item",{key:2,attrs:{type:"warning",timestamp:"2020-11-18 14:38"}},[t._v("双方无法协商")]),a("el-timeline-item",{key:3,attrs:{type:"primary",timestamp:"2020-11-18 14:06"}},[t._v("商家反驳, 商家提交证据")]),a("el-timeline-item",{key:4,attrs:{type:"primary",timestamp:"2020-11-18 12:46"}},[t._v("顾客发起投诉, 投诉原因: "+t._s(t.complaint.reason))])],1)],1),a("el-form-item",[a("el-button",{staticStyle:{float:"right"},attrs:{type:"info",disabled:""}},[t._v("此裁定为最终裁定, 不得上诉")])],1)],1)],1)])},n=[],o=(a("96cf"),a("1da1")),l=a("4fdb"),c=a("2d01"),m={data:function(){return{order:{},complaint:{reason:"以次充好",description:"在 Form 组件中，每一个表单域由一个 Form-Item 组件构成，表单域中可以放置各种类型的表单控件，\n包括 Input、Select、Checkbox、Radio、Switch、DatePicker、TimePicker"},imgList:["/imgs/foods/huangmenji.jpg","/imgs/foods/huangmenzhujiao.jpg","/imgs/foods/huangmenya.jpg","/imgs/foods/jipai.jpg","/imgs/foods/huangmenfuzhu.jpg"]}},components:{OrderItem:l["a"]},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].getOrderList(1,1);case 2:a=e.sent,t.order=a.data[0];case 4:case"end":return e.stop()}}),e)})))()}},p=m,u=(a("f04e"),a("2877")),d=Object(u["a"])(p,s,n,!1,null,"4bd65408",null),f=d.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"发起投诉",visible:t.$store.state.submitComplaintPaneShow,width:"50%"},on:{close:function(e){return t.$store.commit("closeSubmitComplaintPane")}}},[a("div",[a("el-form",{ref:"form",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"投诉订单"}},[a("el-select",{model:{value:t.complaint.orderId,callback:function(e){t.$set(t.complaint,"orderId",e)},expression:"complaint.orderId"}},t._l(t.orderList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.id,value:e.id}},[a("span",[t._v(t._s(e.id))]),a("span",{staticStyle:{"margin-left":"10px",color:"#999"}},[t._v(t._s(e.name))])])})),1)],1),a("el-form-item",{attrs:{label:"投诉原因"}},[a("el-input",{attrs:{placeholder:"简短描述投诉主题"},model:{value:t.complaint.reason,callback:function(e){t.$set(t.complaint,"reason",e)},expression:"complaint.reason"}})],1),a("el-form-item",{attrs:{label:"更多描述"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请详细描述投诉内容"},model:{value:t.complaint.description,callback:function(e){t.$set(t.complaint,"description",e)},expression:"complaint.description"}})],1),a("el-form-item",{attrs:{label:"图片证据"}},[a("el-upload",{staticClass:"upload",attrs:{action:"/upload","auto-upload":!1,"file-list":t.complaint.fileList,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("添加照片")])],1)],1),a("el-form-item",{attrs:{label:"处理状态"}},[a("el-timeline",[a("el-timeline-item",{key:1,attrs:{type:"primary",timestamp:"2020-11-18 12:46"}},[t._v("顾客发起投诉, 投诉原因: "+t._s(t.complaint.reason))])],1)],1),a("el-form-item",[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.submitComplaint}},[t._v("提交投诉")])],1)],1)],1)])},g=[],v={data:function(){return{complaint:{orderId:null,reason:"",description:"",fileList:[]},orderList:[{id:"366 899 56012",name:"黄焖鸡 等1件商品"},{id:"366 899 56013",name:"黄焖鸡 + 黄焖鸭 等2件商品"},{id:"366 899 56014",name:"豪大大鸡排 + 汉堡 + 可乐 等3件商品"}]}},methods:{submitComplaint:function(){this.$message.success("提交投诉成功"),this.$store.commit("closeSubmitComplaintPane")}}},b=v,y=Object(u["a"])(b,h,g,!1,null,"4da1178a",null),w=y.exports,k={data:function(){return{msg:"",list:[{date:(new Date).toLocaleDateString()+(new Date).toLocaleTimeString(),text:{text:"您好, 请问有什么可以帮助您"},mine:!1,name:"饱了吧智能客服",img:"https://zbq.ismy.wang/img/helper.jpg"},{date:(new Date).toLocaleDateString()+(new Date).toLocaleTimeString(),text:{text:'人工客服繁忙, 您的前面仍有 <span style="color:skyblue">208</span> 位用户'},mine:!1,name:"饱了吧智能客服",img:"https://zbq.ismy.wang/img/helper.jpg"},{date:(new Date).toLocaleDateString()+(new Date).toLocaleTimeString(),text:{text:'您可以选择自助服务： <ul><li><a href="#" style="color:skyblue">会员充值没有到账?</a></li><li><a href="#" style="color:skyblue">如何进行投诉?</a></li></ul>或者继续等待'},mine:!1,name:"饱了吧智能客服",img:"https://zbq.ismy.wang/img/helper.jpg"}],config:{img:"https://zbq.ismy.wang/img/helper.jpg",name:"饱了吧智能客服",dept:"人工智能客服为您服务",callback:this.headerEvent},rightConfig:{listTip:"当前在线客服",tip:"系统公告",list:[{name:"盼盼",img:"https://zbq.ismy.wang/img/helper.jpg"},{name:"坤坤",img:"https://zbq.ismy.wang/img/helper.jpg"},{name:"丽丽",img:"https://zbq.ismy.wang/img/helper.jpg"}]}}},methods:{handleEnter:function(){this.list.push({date:(new Date).toLocaleDateString()+(new Date).toLocaleTimeString(),img:this.$store.state.user.info.avatar,name:this.$store.state.user.info.username,mine:!0,text:{text:this.msg}})},showComplaintPane:function(){this.$store.commit("toggleComplaintPane")}},components:{ComplaintPane:f,SubmitComplaintPane:w}},_=k,x=(a("1ce2"),Object(u["a"])(_,r,i,!1,null,"f6cb367a",null));e["default"]=x.exports},f04e:function(t,e,a){"use strict";a("c6c9")}}]);
//# sourceMappingURL=chunk-18be4812.9c8b3282.js.map