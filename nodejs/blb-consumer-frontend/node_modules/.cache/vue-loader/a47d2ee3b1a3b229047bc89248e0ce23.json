{"remainingRequest":"D:\\project\\blb-consumer-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\blb-consumer-frontend\\src\\views\\List.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\blb-consumer-frontend\\src\\views\\List.vue","mtime":1606571741849},{"path":"D:\\project\\blb-consumer-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\blb-consumer-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\project\\blb-consumer-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\blb-consumer-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgU2hvcExpc3QgZnJvbSAnLi4vY29tcG9uZW50cy90YWtlYXdheS9TaG9wTGlzdCcNCmltcG9ydCBzaG9wU2VydmljZSBmcm9tICcuLi9zZXJ2aWNlL1Nob3BTZXJ2aWNlJw0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgc2hvcERhdGE6IHt9LA0KICAgICAgY2F0ZWdvcnlJZDogdGhpcy4kcm91dGUucGFyYW1zLmNhdGVnb3J5SWQsDQogICAgICBwYWdlOiAxLA0KICAgICAgc2l6ZTogMTINCiAgICB9DQogIH0sDQogIGNyZWF0ZWQgKCkgew0KICAgIHRoaXMuZ2V0U2hvcERhdGEoKQ0KICB9LA0KICBiZWZvcmVSb3V0ZVVwZGF0ZSAodG8sIGZyb20sIG5leHQpIHsNCiAgICBpZiAoIXRvLmZ1bGxQYXRoLnN0YXJ0c1dpdGgoJy9saXN0JykpIHsNCiAgICAgIHJldHVybiBuZXh0KCkNCiAgICB9DQogICAgbmV4dCgpDQogICAgLy8g6Lez6L2s5Yiw5YW25LuW5YiG57G75LiL6aKd5bqX6ZO66aG16Z2iDQogICAgdGhpcy5wYWdlID0gMQ0KICAgIHRoaXMuc2l6ZSA9IDINCiAgICB0aGlzLmNhdGVnb3J5SWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuY2F0ZWdvcnlJZA0KICAgIHRoaXMuZ2V0U2hvcERhdGEoKQ0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgU2hvcExpc3QNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGFzeW5jIGdldFNob3BEYXRhICgpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIGNvbnN0IHNob3BEYXRhID0gYXdhaXQgc2hvcFNlcnZpY2UuZ2V0U2hvcExpc3RCeUNhdGVnb3J5KHsNCiAgICAgICAgICBjYXRlZ29yeUlkOiB0aGlzLiRyb3V0ZS5wYXJhbXMuY2F0ZWdvcnlJZCwNCiAgICAgICAgICBwYWdlOiB0aGlzLnBhZ2UsDQogICAgICAgICAgc2l6ZTogdGhpcy5zaXplDQogICAgICAgIH0pDQogICAgICAgIHRoaXMuc2hvcERhdGEgPSBzaG9wRGF0YQ0KICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGUubWVzc2FnZSkNCiAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIGhhbmRsZVBhZ2VDaGFuZ2UgKHZhbCkgew0KICAgICAgdGhpcy5wYWdlID0gdmFsDQogICAgICBhd2FpdCB0aGlzLmdldFNob3BEYXRhKCkNCiAgICAgIHRoaXMuc2Nyb2xsVG9Ub3AoKQ0KICAgIH0sDQogICAgYXN5bmMgaGFuZGxlU2l6ZUNoYW5nZSAodmFsKSB7DQogICAgICB0aGlzLnNpemUgPSB2YWwNCiAgICAgIGF3YWl0IHRoaXMuZ2V0U2hvcERhdGEoKQ0KICAgICAgdGhpcy5zY3JvbGxUb1RvcCgpDQogICAgfSwNCiAgICBzY3JvbGxUb1RvcCAoKSB7DQogICAgICB3aW5kb3cuc2Nyb2xsVG8oeyB0b3A6IDAgfSkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <shop-list style=\"margin-top:10px\" :title=\"'分类结果'\" :shopList=\"shopData.data\"></shop-list>\r\n    <el-card v-if=\"shopData.data\" style=\"margin-top:10px;text-align:center\">\r\n      <el-pagination\r\n      @size-change=\"handleSizeChange\"\r\n      background\r\n      @current-change=\"handlePageChange\"\r\n      :current-page=\"page\"\r\n      :page-sizes=\"[4, 12, 20, 30]\"\r\n      :page-size=\"size\"\r\n      layout=\"prev, pager, next\"\r\n      :total=\"shopData.total\">\r\n    </el-pagination>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ShopList from '../components/takeaway/ShopList'\r\nimport shopService from '../service/ShopService'\r\nexport default {\r\n  data () {\r\n    return {\r\n      shopData: {},\r\n      categoryId: this.$route.params.categoryId,\r\n      page: 1,\r\n      size: 12\r\n    }\r\n  },\r\n  created () {\r\n    this.getShopData()\r\n  },\r\n  beforeRouteUpdate (to, from, next) {\r\n    if (!to.fullPath.startsWith('/list')) {\r\n      return next()\r\n    }\r\n    next()\r\n    // 跳转到其他分类下额店铺页面\r\n    this.page = 1\r\n    this.size = 2\r\n    this.categoryId = this.$route.params.categoryId\r\n    this.getShopData()\r\n  },\r\n  components: {\r\n    ShopList\r\n  },\r\n  methods: {\r\n    async getShopData () {\r\n      try {\r\n        const shopData = await shopService.getShopListByCategory({\r\n          categoryId: this.$route.params.categoryId,\r\n          page: this.page,\r\n          size: this.size\r\n        })\r\n        this.shopData = shopData\r\n      } catch (e) {\r\n        this.$message.error(e.message)\r\n      }\r\n    },\r\n    async handlePageChange (val) {\r\n      this.page = val\r\n      await this.getShopData()\r\n      this.scrollToTop()\r\n    },\r\n    async handleSizeChange (val) {\r\n      this.size = val\r\n      await this.getShopData()\r\n      this.scrollToTop()\r\n    },\r\n    scrollToTop () {\r\n      window.scrollTo({ top: 0 })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n</style>\r\n"]}]}