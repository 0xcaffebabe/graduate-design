{"remainingRequest":"D:\\project\\blb-consumer-frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\blb-consumer-frontend\\src\\views\\Search.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\blb-consumer-frontend\\src\\views\\Search.vue","mtime":1606571741851},{"path":"D:\\project\\blb-consumer-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\blb-consumer-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\project\\blb-consumer-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\blb-consumer-frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgU2hvcExpc3QgZnJvbSAnLi4vY29tcG9uZW50cy90YWtlYXdheS9TaG9wTGlzdCcNCmltcG9ydCBzaG9wU2VydmljZSBmcm9tICcuLi9zZXJ2aWNlL1Nob3BTZXJ2aWNlJw0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaW5wdXQ6ICcnLA0KICAgICAgc2hvcExpc3Q6IFtdLA0KICAgICAgcGFnZTogMSwNCiAgICAgIHNpemU6IDEyLA0KICAgICAgdG90YWw6IDANCiAgICB9DQogIH0sDQogIGNvbXBvbmVudHM6IHsNCiAgICBTaG9wTGlzdA0KICB9LA0KICBtZXRob2RzOiB7DQogICAgcXVlcnlTZWFyY2ggKHF1ZXJ5U3RyaW5nLCBjYikgew0KICAgICAgY2IodGhpcy5sb2FkQWxsKCkpDQogICAgfSwNCiAgICBsb2FkQWxsICgpIHsNCiAgICAgIHJldHVybiBbDQogICAgICAgIHsNCiAgICAgICAgICB2YWx1ZTogJ+m7hOeElum4oeexs+mlrScsDQogICAgICAgICAgYWRkcmVzczogJ+mypOWfjuWMuuWqkuS6uuahpei3rzLlj7flupcnDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB2YWx1ZTogJ+aymeWOv+Wwj+WQgycsDQogICAgICAgICAgYWRkcmVzczogJ+S4sOazveWMuuazsOemvuW5v+WcujPlj7flupcnDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB2YWx1ZTogJ+mlv+eCueWkluWNlicsDQogICAgICAgICAgYWRkcmVzczogJ+Wuoui/kOS4reW/g+ermTTlj7flupcnDQogICAgICAgIH0NCiAgICAgIF0NCiAgICB9LA0KICAgIGhhbmRsZVNlbGVjdCAoaXRlbSkgew0KICAgICAgdGhpcy5zZWFyY2goKQ0KICAgIH0sDQogICAgYXN5bmMgc2VhcmNoICgpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzaG9wU2VydmljZS5zZWFyY2hTaG9wKHsNCiAgICAgICAgICBrdzogdGhpcy5pbnB1dCwNCiAgICAgICAgICBwYWdlOiB0aGlzLnBhZ2UsDQogICAgICAgICAgc2l6ZTogdGhpcy5zaXplDQogICAgICAgIH0pDQogICAgICAgIHRoaXMuc2hvcExpc3QgPSBkYXRhLmRhdGENCiAgICAgICAgdGhpcy50b3RhbCA9IGRhdGEudG90YWwNCiAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihlLm1lc3NhZ2UpDQogICAgICB9DQogICAgfSwNCiAgICBhc3luYyBoYW5kbGVTaXplQ2hhbmdlICh2YWwpIHsNCiAgICAgIHRoaXMuc2l6ZSA9IHZhbA0KICAgICAgYXdhaXQgdGhpcy5zZWFyY2goKQ0KICAgICAgdGhpcy5zY3JvbGxUb1RvcCgpDQogICAgfSwNCiAgICBhc3luYyBoYW5kbGVQYWdlQ2hhbmdlICh2YWwpIHsNCiAgICAgIHRoaXMucGFnZSA9IHZhbA0KICAgICAgYXdhaXQgdGhpcy5zZWFyY2goKQ0KICAgICAgdGhpcy5zY3JvbGxUb1RvcCgpDQogICAgfSwNCiAgICBzY3JvbGxUb1RvcCAoKSB7DQogICAgICB3aW5kb3cuc2Nyb2xsVG8oeyB0b3A6IDAgfSkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["Search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Search.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <el-breadcrumb separator=\"/\" style=\"margin-bottom:20px\">\r\n      <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>搜索</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <div style=\"text-align:center\" class=\"search-box-container\">\r\n      <el-autocomplete\r\n        style=\"width:600px\"\r\n        class='search-input'\r\n        v-model='input'\r\n        :fetch-suggestions='querySearch'\r\n        placeholder='请输入内容'\r\n        suffix-icon=\"el-icon-search\"\r\n        @select='handleSelect'\r\n        @keyup.enter=\"search\"\r\n      >\r\n        <template v-slot=\"{ item }\">\r\n          <div class=\"shop-name\">{{ item.value }}</div>\r\n          <div class=\"shop-addr\"> <span class=\"el-icon-location\"></span> {{ item.address }}</div>\r\n        </template>\r\n      </el-autocomplete>\r\n      <!-- <el-button type=\"primary\" style=\"margin-left:20px\" @click=\"search\">搜索</el-button> -->\r\n    </div>\r\n    <shop-list v-if=\"shopList.length != 0\" style=\"margin-top:10px\" :title=\"'搜索结果'\" :shopList=\"shopList\"></shop-list>\r\n    <el-card v-if=\"shopList.length != 0\" style=\"margin-top:10px;text-align:center\">\r\n      <el-pagination\r\n      @size-change=\"handleSizeChange\"\r\n      background\r\n      @current-change=\"handlePageChange\"\r\n      :current-page=\"page\"\r\n      :page-sizes=\"[5, 12, 20, 30]\"\r\n      :page-size=\"size\"\r\n      layout=\"prev, pager, next\"\r\n      :total=\"total\">\r\n    </el-pagination>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ShopList from '../components/takeaway/ShopList'\r\nimport shopService from '../service/ShopService'\r\nexport default {\r\n  data () {\r\n    return {\r\n      input: '',\r\n      shopList: [],\r\n      page: 1,\r\n      size: 12,\r\n      total: 0\r\n    }\r\n  },\r\n  components: {\r\n    ShopList\r\n  },\r\n  methods: {\r\n    querySearch (queryString, cb) {\r\n      cb(this.loadAll())\r\n    },\r\n    loadAll () {\r\n      return [\r\n        {\r\n          value: '黄焖鸡米饭',\r\n          address: '鲤城区媒人桥路2号店'\r\n        },\r\n        {\r\n          value: '沙县小吃',\r\n          address: '丰泽区泰禾广场3号店'\r\n        },\r\n        {\r\n          value: '饿点外卖',\r\n          address: '客运中心站4号店'\r\n        }\r\n      ]\r\n    },\r\n    handleSelect (item) {\r\n      this.search()\r\n    },\r\n    async search () {\r\n      try {\r\n        const data = await shopService.searchShop({\r\n          kw: this.input,\r\n          page: this.page,\r\n          size: this.size\r\n        })\r\n        this.shopList = data.data\r\n        this.total = data.total\r\n      } catch (e) {\r\n        this.$message.error(e.message)\r\n      }\r\n    },\r\n    async handleSizeChange (val) {\r\n      this.size = val\r\n      await this.search()\r\n      this.scrollToTop()\r\n    },\r\n    async handlePageChange (val) {\r\n      this.page = val\r\n      await this.search()\r\n      this.scrollToTop()\r\n    },\r\n    scrollToTop () {\r\n      window.scrollTo({ top: 0 })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='less' scoped>\r\n  .el-autocomplete /deep/ .el-input__inner {\r\n    padding: 15px;\r\n    font-size: 16px;\r\n    height: 60px;\r\n  }\r\n  .el-autocomplete /deep/ .el-icon-search {\r\n    font-size: 16px;\r\n    color: #333;\r\n    margin-right: 10px;\r\n  }\r\n  .shop-name {\r\n    font-size: 16px;\r\n  }\r\n  .shop-addr {\r\n    color: #999;\r\n  }\r\n</style>\r\n"]}]}