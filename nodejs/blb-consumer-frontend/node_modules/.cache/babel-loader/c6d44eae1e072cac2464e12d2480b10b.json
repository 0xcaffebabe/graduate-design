{"remainingRequest":"D:\\project\\blb-consumer-frontend\\node_modules\\thread-loader\\dist\\cjs.js!D:\\project\\blb-consumer-frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\blb-consumer-frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\project\\blb-consumer-frontend\\src\\service\\ConsumerService.js","dependencies":[{"path":"D:\\project\\blb-consumer-frontend\\src\\service\\ConsumerService.js","mtime":1606745178664},{"path":"D:\\project\\blb-consumer-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\blb-consumer-frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\blb-consumer-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\project\\blb-consumer-frontend\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovcHJvamVjdC9ibGItY29uc3VtZXItZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkQ6L3Byb2plY3QvYmxiLWNvbnN1bWVyLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRDovcHJvamVjdC9ibGItY29uc3VtZXItZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IHJlcG9zaXRvcnkgZnJvbSAnLi4vcmVwb3NpdG9yeSc7CmltcG9ydCBzdG9yYWdlU2VydmljZSBmcm9tICcuL1N0b3JhZ2VTZXJ2aWNlJzsKCnZhciBDb25zdW1lclNlcnZpY2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIENvbnN1bWVyU2VydmljZSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb25zdW1lclNlcnZpY2UpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKENvbnN1bWVyU2VydmljZSwgW3sKICAgIGtleTogImlzTG9naW4iLAogICAgLy8g5Yik5pat5piv5ZCm55m75b2VCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2lzTG9naW4gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHRva2VuLCBkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRva2VuID0gc3RvcmFnZVNlcnZpY2UuZ2V0SXRlbSgndG9rZW4nKTsKCiAgICAgICAgICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGZhbHNlKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVwb3NpdG9yeS5nZXRDb25zdW1lckluZm8oKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgZGF0YSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBkYXRhLnN1Y2Nlc3MpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gaXNMb2dpbigpIHsKICAgICAgICByZXR1cm4gX2lzTG9naW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGlzTG9naW47CiAgICB9KCkgLy8g6I635Y+W5b2T5YmN55m75b2V55So5oi35L+h5oGv77yI5Lya5a+55L+h5oGv6L+b6KGM57yT5a2Y77yJCgogIH0sIHsKICAgIGtleTogImdldENvbnN1bWVySW5mbyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldENvbnN1bWVySW5mbyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghdGhpcy5jb25zdW1lckluZm8pIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgdGhpcy5jb25zdW1lckluZm8pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVwb3NpdG9yeS5nZXRDb25zdW1lckluZm8oKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgZGF0YSA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChkYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+iOt+WPlueUqOaIt+S/oeaBr+Wksei0pTonICsgZGF0YS5tc2cpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgZGF0YS5kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0Q29uc3VtZXJJbmZvKCkgewogICAgICAgIHJldHVybiBfZ2V0Q29uc3VtZXJJbmZvLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRDb25zdW1lckluZm87CiAgICB9KCkgLy8g6L+b6KGM55m75b2VCgogIH0sIHsKICAgIGtleTogImxvZ2luIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfbG9naW4gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKHVzZXJuYW1lLCBwYXNzd29yZCkgewogICAgICAgIHZhciBkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVwb3NpdG9yeS5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKGRhdGEuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign55m75b2V5aSx6LSlOicgKyBkYXRhLm1zZyk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIHN0b3JhZ2VTZXJ2aWNlLnB1dEl0ZW0oJ3Rva2VuJywgZGF0YS5kYXRhLnRva2VuKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBkYXRhLmRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBsb2dpbihfeCwgX3gyKSB7CiAgICAgICAgcmV0dXJuIF9sb2dpbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gbG9naW47CiAgICB9KCkgLy8g6L+b6KGM5rOo5YaMCgogIH0sIHsKICAgIGtleTogInJlZ2lzdGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVnaXN0ZXIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KHBhcmFtcykgewogICAgICAgIHZhciBkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVwb3NpdG9yeS5yZWdpc3RlcihwYXJhbXMpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQ0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKGRhdGEuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5rOo5YaM5aSx6LSlOicgKyBkYXRhLm1zZyk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBkYXRhLmRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiByZWdpc3RlcihfeDMpIHsKICAgICAgICByZXR1cm4gX3JlZ2lzdGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZWdpc3RlcjsKICAgIH0oKSAvLyDojrflj5blvZPliY3nmbvlvZXnlKjmiLfpu5jorqTmlLbotKfkv6Hmga8KCiAgfSwgewogICAga2V5OiAiZ2V0RGVmYXVsdERlbGl2ZXJ5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0RGVmYXVsdERlbGl2ZXJ5ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlcG9zaXRvcnkuZ2V0Q29uc3VtZXJEZWZhdWx0RGVsaXZlcnkoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgZGF0YSA9IF9jb250ZXh0NS5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChkYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+iOt+WPlum7mOiupOaUtui0p+S/oeaBr+Wksei0pTonICsgZGF0YS5tc2cpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgZGF0YS5kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0RGVmYXVsdERlbGl2ZXJ5KCkgewogICAgICAgIHJldHVybiBfZ2V0RGVmYXVsdERlbGl2ZXJ5LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXREZWZhdWx0RGVsaXZlcnk7CiAgICB9KCkgLy8g5rOo6ZSACgogIH0sIHsKICAgIGtleTogImxvZ291dCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9nb3V0KCkgewogICAgICBzdG9yYWdlU2VydmljZS5yZW1vdmUoJ3Rva2VuJyk7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBsb2FkQXZhdGFyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdXBsb2FkQXZhdGFyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNihmaWxlTGlzdCkgewogICAgICAgIHZhciBmb3JtRGF0YSwgZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEoIWZpbGVMaXN0IHx8IGZpbGVMaXN0Lmxlbmd0aCA9PT0gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+S4iuS8oOWktOWDj+Wksei0pTrmsqHmnInpgInmi6nlm77niYcnKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGZpbGVMaXN0WzBdKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiByZXBvc2l0b3J5LnVwbG9hZEF2YXRhcihmb3JtRGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIGRhdGEgPSBfY29udGV4dDYuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfkuIrkvKDlpLTlg4/lpLHotKU6JyArIGRhdGEubXNnKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIsIGRhdGEuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiB1cGxvYWRBdmF0YXIoX3g0KSB7CiAgICAgICAgcmV0dXJuIF91cGxvYWRBdmF0YXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHVwbG9hZEF2YXRhcjsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInVwZGF0ZVVzZXJJbmZvIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdXBkYXRlVXNlckluZm8gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KHVzZXJJbmZvKSB7CiAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiByZXBvc2l0b3J5LnVwZGF0ZVVzZXJJbmZvKHVzZXJJbmZvKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgZGF0YSA9IF9jb250ZXh0Ny5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChkYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+S/neWtmOeUqOaIt+S/oeaBr+Wksei0pTonICsgZGF0YS5tc2cpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgicmV0dXJuIiwgdHJ1ZSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVVzZXJJbmZvKF94NSkgewogICAgICAgIHJldHVybiBfdXBkYXRlVXNlckluZm8uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHVwZGF0ZVVzZXJJbmZvOwogICAgfSgpCiAgfSwgewogICAga2V5OiAidXBkYXRlUGFzc3dvcmQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF91cGRhdGVQYXNzd29yZCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgob2xkLCBuZXdQYXNzd29yZCkgewogICAgICAgIHZhciBkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVwb3NpdG9yeS51cGRhdGVQYXNzd29yZChvbGQsIG5ld1Bhc3N3b3JkKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgZGF0YSA9IF9jb250ZXh0OC5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChkYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+S/ruaUueWvhueggeWksei0pTonICsgZGF0YS5tc2cpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIiwgdHJ1ZSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOCk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVBhc3N3b3JkKF94NiwgX3g3KSB7CiAgICAgICAgcmV0dXJuIF91cGRhdGVQYXNzd29yZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gdXBkYXRlUGFzc3dvcmQ7CiAgICB9KCkKICB9XSk7CgogIHJldHVybiBDb25zdW1lclNlcnZpY2U7Cn0oKTsKCmV4cG9ydCBkZWZhdWx0IG5ldyBDb25zdW1lclNlcnZpY2UoKTs="},{"version":3,"sources":["D:/project/blb-consumer-frontend/src/service/ConsumerService.js"],"names":["repository","storageService","ConsumerService","token","getItem","getConsumerInfo","data","success","consumerInfo","Error","msg","username","password","login","putItem","params","register","getConsumerDefaultDelivery","remove","fileList","length","formData","FormData","append","uploadAvatar","userInfo","updateUserInfo","old","newPassword","updatePassword"],"mappings":";;;;AAAA,OAAOA,UAAP,MAAuB,eAAvB;AACA,OAAOC,cAAP,MAA2B,kBAA3B;;IACMC,e;;;;;;;AACJ;;;;;;;;AAEQC,gBAAAA,K,GAAQF,cAAc,CAACG,OAAf,CAAuB,OAAvB,C;;oBACTD,K;;;;;iDACI,K;;;;uBAEUH,UAAU,CAACK,eAAX,E;;;AAAbC,gBAAAA,I;iDACCA,IAAI,CAACC,O;;;;;;;;;;;;;;;QAGd;;;;;;;;;;;qBAEM,KAAKC,Y;;;;;kDACA,KAAKA,Y;;;;uBAEKR,UAAU,CAACK,eAAX,E;;;AAAbC,gBAAAA,I;;oBACDA,IAAI,CAACC,O;;;;;sBACF,IAAIE,KAAJ,CAAU,cAAcH,IAAI,CAACI,GAA7B,C;;;kDAEDJ,IAAI,CAACA,I;;;;;;;;;;;;;;;QAGd;;;;;6FACaK,Q,EAAUC,Q;;;;;;;uBACFZ,UAAU,CAACa,KAAX,CAAiBF,QAAjB,EAA2BC,QAA3B,C;;;AAAbN,gBAAAA,I;;oBACDA,IAAI,CAACC,O;;;;;sBACF,IAAIE,KAAJ,CAAU,UAAUH,IAAI,CAACI,GAAzB,C;;;AAERT,gBAAAA,cAAc,CAACa,OAAf,CAAuB,OAAvB,EAAgCR,IAAI,CAACA,IAAL,CAAUH,KAA1C;kDACOG,IAAI,CAACA,I;;;;;;;;;;;;;;;QAGd;;;;;gGACgBS,M;;;;;;;uBACKf,UAAU,CAACgB,QAAX,CAAoBD,MAApB,C;;;AAAbT,gBAAAA,I;;oBACDA,IAAI,CAACC,O;;;;;sBACF,IAAIE,KAAJ,CAAU,UAAUH,IAAI,CAACI,GAAzB,C;;;kDAEDJ,IAAI,CAACA,I;;;;;;;;;;;;;;;QAGd;;;;;;;;;;;;uBAEqBN,UAAU,CAACiB,0BAAX,E;;;AAAbX,gBAAAA,I;;oBACDA,IAAI,CAACC,O;;;;;sBACF,IAAIE,KAAJ,CAAU,gBAAgBH,IAAI,CAACI,GAA/B,C;;;kDAEDJ,IAAI,CAACA,I;;;;;;;;;;;;;;;QAGd;;;;6BACU;AACRL,MAAAA,cAAc,CAACiB,MAAf,CAAsB,OAAtB;AACD;;;;oGAEmBC,Q;;;;;;sBACd,CAACA,QAAD,IAAaA,QAAQ,CAACC,MAAT,KAAoB,C;;;;;sBAC7B,IAAIX,KAAJ,CAAU,eAAV,C;;;AAEFY,gBAAAA,Q,GAAW,IAAIC,QAAJ,E;AACjBD,gBAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwBJ,QAAQ,CAAC,CAAD,CAAhC;;uBACmBnB,UAAU,CAACwB,YAAX,CAAwBH,QAAxB,C;;;AAAbf,gBAAAA,I;;oBACDA,IAAI,CAACC,O;;;;;sBACF,IAAIE,KAAJ,CAAU,YAAYH,IAAI,CAACI,GAA3B,C;;;kDAEDJ,IAAI,CAACA,I;;;;;;;;;;;;;;;;;;;sGAGQmB,Q;;;;;;;uBACDzB,UAAU,CAAC0B,cAAX,CAA0BD,QAA1B,C;;;AAAbnB,gBAAAA,I;;oBACDA,IAAI,CAACC,O;;;;;sBACF,IAAIE,KAAJ,CAAU,cAAcH,IAAI,CAACI,GAA7B,C;;;kDAED,I;;;;;;;;;;;;;;;;;;;sGAGaiB,G,EAAKC,W;;;;;;;uBACN5B,UAAU,CAAC6B,cAAX,CAA0BF,GAA1B,EAA+BC,WAA/B,C;;;AAAbtB,gBAAAA,I;;oBACDA,IAAI,CAACC,O;;;;;sBACF,IAAIE,KAAJ,CAAU,YAAYH,IAAI,CAACI,GAA3B,C;;;kDAED,I;;;;;;;;;;;;;;;;;;;;;AAGX,eAAe,IAAIR,eAAJ,EAAf","sourcesContent":["import repository from '../repository'\r\nimport storageService from './StorageService'\r\nclass ConsumerService {\r\n  // 判断是否登录\r\n  async isLogin () {\r\n    const token = storageService.getItem('token')\r\n    if (!token) {\r\n      return false\r\n    }\r\n    const data = await repository.getConsumerInfo()\r\n    return data.success\r\n  }\r\n\r\n  // 获取当前登录用户信息（会对信息进行缓存）\r\n  async getConsumerInfo () {\r\n    if (this.consumerInfo) {\r\n      return this.consumerInfo\r\n    }\r\n    const data = await repository.getConsumerInfo()\r\n    if (!data.success) {\r\n      throw new Error('获取用户信息失败:' + data.msg)\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  // 进行登录\r\n  async login (username, password) {\r\n    const data = await repository.login(username, password)\r\n    if (!data.success) {\r\n      throw new Error('登录失败:' + data.msg)\r\n    }\r\n    storageService.putItem('token', data.data.token)\r\n    return data.data\r\n  }\r\n\r\n  // 进行注册\r\n  async register (params) {\r\n    const data = await repository.register(params)\r\n    if (!data.success) {\r\n      throw new Error('注册失败:' + data.msg)\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  // 获取当前登录用户默认收货信息\r\n  async getDefaultDelivery () {\r\n    const data = await repository.getConsumerDefaultDelivery()\r\n    if (!data.success) {\r\n      throw new Error('获取默认收货信息失败:' + data.msg)\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  // 注销\r\n  logout () {\r\n    storageService.remove('token')\r\n  }\r\n\r\n  async uploadAvatar (fileList) {\r\n    if (!fileList || fileList.length === 0) {\r\n      throw new Error('上传头像失败:没有选择图片')\r\n    }\r\n    const formData = new FormData()\r\n    formData.append('file', fileList[0])\r\n    const data = await repository.uploadAvatar(formData)\r\n    if (!data.success) {\r\n      throw new Error('上传头像失败:' + data.msg)\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  async updateUserInfo (userInfo) {\r\n    const data = await repository.updateUserInfo(userInfo)\r\n    if (!data.success) {\r\n      throw new Error('保存用户信息失败:' + data.msg)\r\n    }\r\n    return true\r\n  }\r\n\r\n  async updatePassword (old, newPassword) {\r\n    const data = await repository.updatePassword(old, newPassword)\r\n    if (!data.success) {\r\n      throw new Error('修改密码失败:' + data.msg)\r\n    }\r\n    return true\r\n  }\r\n}\r\nexport default new ConsumerService()\r\n"]}]}