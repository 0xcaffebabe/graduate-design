{"remainingRequest":"D:\\project\\blb-consumer-frontend\\node_modules\\thread-loader\\dist\\cjs.js!D:\\project\\blb-consumer-frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\blb-consumer-frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\project\\blb-consumer-frontend\\src\\service\\OrderService.js","dependencies":[{"path":"D:\\project\\blb-consumer-frontend\\src\\service\\OrderService.js","mtime":1606571741844},{"path":"D:\\project\\blb-consumer-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\blb-consumer-frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\blb-consumer-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\project\\blb-consumer-frontend\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovcHJvamVjdC9ibGItY29uc3VtZXItZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkQ6L3Byb2plY3QvYmxiLWNvbnN1bWVyLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRDovcHJvamVjdC9ibGItY29uc3VtZXItZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwppbXBvcnQgcmVwb3NpdG9yeSBmcm9tICcuLi9yZXBvc2l0b3J5JzsKbW9tZW50LmxvY2FsZSgnemgtY24nKTsgLy8g6K6i5Y2V5pyN5YqhCgp2YXIgT3JkZXJTZXJ2aWNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBPcmRlclNlcnZpY2UoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgT3JkZXJTZXJ2aWNlKTsKICB9CgogIF9jcmVhdGVDbGFzcyhPcmRlclNlcnZpY2UsIFt7CiAgICBrZXk6ICJnZXRPcmRlckRlbGl2ZXJ5VGltZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0T3JkZXJEZWxpdmVyeVRpbWUoKSB7CiAgICAgIHJldHVybiBtb21lbnQoKS5hZGQoMSwgJ2hvdXJzJykuY2FsZW5kYXIoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtYWtlT3JkZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9tYWtlT3JkZXIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUocGFyYW1zKSB7CiAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcGFyYW1zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwYXJhbXMpKTsKCiAgICAgICAgICAgICAgICBpZiAocGFyYW1zLmRlbGl2ZXJ5SWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5LiL5Y2V5aSx6LSlOuaUtui0p+S/oeaBr0lE5Li656m6Jyk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGlmIChwYXJhbXMucHJvZHVjdExpc3QpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5LiL5Y2V5aSx6LSlOuS4i+WNleWVhuWTgeWIl+ihqOS4uuepuicpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBwYXJhbXMucHJvZHVjdExpc3QgPSBwYXJhbXMucHJvZHVjdExpc3QubWFwKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdElkOiB2LnByb2R1Y3RJZCwKICAgICAgICAgICAgICAgICAgICBzcGVjSWQ6IHYuc3BlY0lkLAogICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiB2LnByb2R1Y3RRdWFudGl0eQogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiByZXBvc2l0b3J5Lm1ha2VPcmRlcihwYXJhbXMpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfkuIvljZXlpLHotKU6JyArIGRhdGEubXNnKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGRhdGEuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gbWFrZU9yZGVyKF94KSB7CiAgICAgICAgcmV0dXJuIF9tYWtlT3JkZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG1ha2VPcmRlcjsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImdldE9yZGVyTGlzdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldE9yZGVyTGlzdCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIocGFnZSwgc2l6ZSkgewogICAgICAgIHZhciBkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVwb3NpdG9yeS5nZXRPcmRlckxpc3QocGFnZSwgc2l6ZSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGRhdGEgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfojrflj5borqLljZXliJfooajlpLHotKU6JyArIGRhdGEubXNnKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIGRhdGEuZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldE9yZGVyTGlzdChfeDIsIF94MykgewogICAgICAgIHJldHVybiBfZ2V0T3JkZXJMaXN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRPcmRlckxpc3Q7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJnZXRPcmRlckRldGFpbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldE9yZGVyRGV0YWlsID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhvcmRlcklkKSB7CiAgICAgICAgdmFyIGRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiByZXBvc2l0b3J5LmdldE9yZGVyRGV0YWlsKG9yZGVySWQpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKGRhdGEuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign6I635Y+W6K6i5Y2V6K+m5oOF5aSx6LSlOicgKyBkYXRhLm1zZyk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEgJiYgZGF0YS5kYXRhLnByb2R1Y3RMaXN0KSB7CiAgICAgICAgICAgICAgICAgIGRhdGEuZGF0YS5wcm9kdWN0TGlzdC5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICAgICAgICAgICAgdi5zcGVjSWQgPSB2LnByb2R1Y3RTcGVjOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgZGF0YS5kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0T3JkZXJEZXRhaWwoX3g0KSB7CiAgICAgICAgcmV0dXJuIF9nZXRPcmRlckRldGFpbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0T3JkZXJEZXRhaWw7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJnZXRPcmRlclN0YXR1cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0T3JkZXJTdGF0dXMob3JkZXIpIHsKICAgICAgaWYgKG9yZGVyLm9yZGVyU3RhdHVzID09PSAwKSB7CiAgICAgICAgcmV0dXJuICfmnKrlpITnkIYnOwogICAgICB9CgogICAgICBpZiAob3JkZXIub3JkZXJTdGF0dXMgPT09IDEpIHsKICAgICAgICByZXR1cm4gJ+W3suWkhOeQhic7CiAgICAgIH0KCiAgICAgIGlmIChvcmRlci5vcmRlclN0YXR1cyA9PT0gMikgewogICAgICAgIHJldHVybiAn6YWN6YCB5LitJzsKICAgICAgfQoKICAgICAgaWYgKG9yZGVyLm9yZGVyU3RhdHVzID09PSAzKSB7CiAgICAgICAgcmV0dXJuICflt7Llroznu5MnOwogICAgICB9CgogICAgICBpZiAob3JkZXIub3JkZXJTdGF0dXMgPT09IDQpIHsKICAgICAgICByZXR1cm4gJ+W3suS9nOW6nyc7CiAgICAgIH0KICAgIH0KICB9XSk7CgogIHJldHVybiBPcmRlclNlcnZpY2U7Cn0oKTsKCmV4cG9ydCBkZWZhdWx0IG5ldyBPcmRlclNlcnZpY2UoKTs="},{"version":3,"sources":["D:/project/blb-consumer-frontend/src/service/OrderService.js"],"names":["moment","repository","locale","OrderService","add","calendar","params","JSON","parse","stringify","deliveryId","Error","productList","map","v","productId","specId","quantity","productQuantity","makeOrder","data","success","msg","page","size","getOrderList","orderId","getOrderDetail","forEach","productSpec","order","orderStatus"],"mappings":";;;;;;;AAAA,OAAOA,MAAP,MAAmB,QAAnB;AACA,OAAOC,UAAP,MAAuB,eAAvB;AACAD,MAAM,CAACE,MAAP,CAAc,OAAd,E,CACA;;IACMC,Y;;;;;;;2CACoB;AACtB,aAAOH,MAAM,GAAGI,GAAT,CAAa,CAAb,EAAgB,OAAhB,EAAyBC,QAAzB,EAAP;AACD;;;;gGAEgBC,M;;;;;;AACfA,gBAAAA,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeH,MAAf,CAAX,CAAT;;oBACKA,MAAM,CAACI,U;;;;;sBACJ,IAAIC,KAAJ,CAAU,eAAV,C;;;oBAEHL,MAAM,CAACM,W;;;;;sBACJ,IAAID,KAAJ,CAAU,eAAV,C;;;AAERL,gBAAAA,MAAM,CAACM,WAAP,GAAqBN,MAAM,CAACM,WAAP,CAAmBC,GAAnB,CAAuB,UAAAC,CAAC,EAAI;AAC/C,yBAAO;AACLC,oBAAAA,SAAS,EAAED,CAAC,CAACC,SADR;AAELC,oBAAAA,MAAM,EAAEF,CAAC,CAACE,MAFL;AAGLC,oBAAAA,QAAQ,EAAEH,CAAC,CAACI;AAHP,mBAAP;AAKD,iBANoB,CAArB;;uBAOmBjB,UAAU,CAACkB,SAAX,CAAqBb,MAArB,C;;;AAAbc,gBAAAA,I;;oBACDA,IAAI,CAACC,O;;;;;sBACF,IAAIV,KAAJ,CAAU,UAAUS,IAAI,CAACE,GAAzB,C;;;iDAEDF,IAAI,CAACA,I;;;;;;;;;;;;;;;;;;;oGAGMG,I,EAAMC,I;;;;;;;uBACLvB,UAAU,CAACwB,YAAX,CAAwBF,IAAxB,EAA8BC,IAA9B,C;;;AAAbJ,gBAAAA,I;;oBACDA,IAAI,CAACC,O;;;;;sBACF,IAAIV,KAAJ,CAAU,cAAcS,IAAI,CAACE,GAA7B,C;;;kDAEDF,IAAI,CAACA,I;;;;;;;;;;;;;;;;;;;sGAGQM,O;;;;;;;uBACDzB,UAAU,CAAC0B,cAAX,CAA0BD,OAA1B,C;;;AAAbN,gBAAAA,I;;oBACDA,IAAI,CAACC,O;;;;;sBACF,IAAIV,KAAJ,CAAU,cAAcS,IAAI,CAACE,GAA7B,C;;;AAER,oBAAIF,IAAI,CAACA,IAAL,IAAaA,IAAI,CAACA,IAAL,CAAUR,WAA3B,EAAwC;AACtCQ,kBAAAA,IAAI,CAACA,IAAL,CAAUR,WAAV,CAAsBgB,OAAtB,CAA8B,UAAAd,CAAC,EAAI;AACjCA,oBAAAA,CAAC,CAACE,MAAF,GAAWF,CAAC,CAACe,WAAb;AACD,mBAFD;AAGD;;kDACMT,IAAI,CAACA,I;;;;;;;;;;;;;;;;;;mCAGEU,K,EAAO;AACrB,UAAIA,KAAK,CAACC,WAAN,KAAsB,CAA1B,EAA6B;AAC3B,eAAO,KAAP;AACD;;AACD,UAAID,KAAK,CAACC,WAAN,KAAsB,CAA1B,EAA6B;AAC3B,eAAO,KAAP;AACD;;AACD,UAAID,KAAK,CAACC,WAAN,KAAsB,CAA1B,EAA6B;AAC3B,eAAO,KAAP;AACD;;AACD,UAAID,KAAK,CAACC,WAAN,KAAsB,CAA1B,EAA6B;AAC3B,eAAO,KAAP;AACD;;AACD,UAAID,KAAK,CAACC,WAAN,KAAsB,CAA1B,EAA6B;AAC3B,eAAO,KAAP;AACD;AACF;;;;;;AAEH,eAAe,IAAI5B,YAAJ,EAAf","sourcesContent":["import moment from 'moment'\r\nimport repository from '../repository'\r\nmoment.locale('zh-cn')\r\n// 订单服务\r\nclass OrderService {\r\n  getOrderDeliveryTime () {\r\n    return moment().add(1, 'hours').calendar()\r\n  }\r\n\r\n  async makeOrder (params) {\r\n    params = JSON.parse(JSON.stringify(params))\r\n    if (!params.deliveryId) {\r\n      throw new Error('下单失败:收货信息ID为空')\r\n    }\r\n    if (!params.productList) {\r\n      throw new Error('下单失败:下单商品列表为空')\r\n    }\r\n    params.productList = params.productList.map(v => {\r\n      return {\r\n        productId: v.productId,\r\n        specId: v.specId,\r\n        quantity: v.productQuantity\r\n      }\r\n    })\r\n    const data = await repository.makeOrder(params)\r\n    if (!data.success) {\r\n      throw new Error('下单失败:' + data.msg)\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  async getOrderList (page, size) {\r\n    const data = await repository.getOrderList(page, size)\r\n    if (!data.success) {\r\n      throw new Error('获取订单列表失败:' + data.msg)\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  async getOrderDetail (orderId) {\r\n    const data = await repository.getOrderDetail(orderId)\r\n    if (!data.success) {\r\n      throw new Error('获取订单详情失败:' + data.msg)\r\n    }\r\n    if (data.data && data.data.productList) {\r\n      data.data.productList.forEach(v => {\r\n        v.specId = v.productSpec\r\n      })\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  getOrderStatus (order) {\r\n    if (order.orderStatus === 0) {\r\n      return '未处理'\r\n    }\r\n    if (order.orderStatus === 1) {\r\n      return '已处理'\r\n    }\r\n    if (order.orderStatus === 2) {\r\n      return '配送中'\r\n    }\r\n    if (order.orderStatus === 3) {\r\n      return '已完结'\r\n    }\r\n    if (order.orderStatus === 4) {\r\n      return '已作废'\r\n    }\r\n  }\r\n}\r\nexport default new OrderService()\r\n"]}]}