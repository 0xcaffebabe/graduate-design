{"remainingRequest":"D:\\project\\blb-consumer-frontend\\node_modules\\thread-loader\\dist\\cjs.js!D:\\project\\blb-consumer-frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\blb-consumer-frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\project\\blb-consumer-frontend\\src\\service\\CartService.js","dependencies":[{"path":"D:\\project\\blb-consumer-frontend\\src\\service\\CartService.js","mtime":1606571741842},{"path":"D:\\project\\blb-consumer-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\blb-consumer-frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\project\\blb-consumer-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\project\\blb-consumer-frontend\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovcHJvamVjdC9ibGItY29uc3VtZXItZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkQ6L3Byb2plY3QvYmxiLWNvbnN1bWVyLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRDovcHJvamVjdC9ibGItY29uc3VtZXItZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IHJlcG9zaXRvcnkgZnJvbSAnLi4vcmVwb3NpdG9yeSc7IC8vIOi0reeJqei9puacjeWKoQoKdmFyIENhcnRTZXJ2aWNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBDYXJ0U2VydmljZSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDYXJ0U2VydmljZSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQ2FydFNlcnZpY2UsIFt7CiAgICBrZXk6ICJhZGRQcm9kdWN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfYWRkUHJvZHVjdCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShwYXJhbXMpIHsKICAgICAgICB2YXIgZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiByZXBvc2l0b3J5LmFkZFByb2R1Y3RJbnRvQ2FydChwYXJhbXMpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+WKoOWFpei0reeJqei9puWksei0pTonICsgZGF0YS5tc2cpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gYWRkUHJvZHVjdChfeCkgewogICAgICAgIHJldHVybiBfYWRkUHJvZHVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gYWRkUHJvZHVjdDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImdldFByb2R1Y3RMaXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0UHJvZHVjdExpc3QgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHNob3BJZCkgewogICAgICAgIHZhciBkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVwb3NpdG9yeS5nZXRDYXJ0UHJvZHVjdExpc3Qoc2hvcElkKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgZGF0YSA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChkYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+iOt+WPlui0reeJqei9puWVhuWTgeWIl+ihqOWksei0pTonICsgZGF0YS5tc2cpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgZGF0YS5kYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0UHJvZHVjdExpc3QoX3gyKSB7CiAgICAgICAgcmV0dXJuIF9nZXRQcm9kdWN0TGlzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0UHJvZHVjdExpc3Q7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJnZXRDYXJ0VG90YWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldENhcnRUb3RhbChwcm9kdWN0TGlzdCkgewogICAgICBpZiAoIXByb2R1Y3RMaXN0KSB7CiAgICAgICAgcmV0dXJuIDA7CiAgICAgIH0KCiAgICAgIHZhciB0b3RhbCA9IDA7CiAgICAgIHByb2R1Y3RMaXN0LmZvckVhY2goZnVuY3Rpb24gKHYpIHsKICAgICAgICB0b3RhbCArPSB2LnByb2R1Y3RRdWFudGl0eTsKICAgICAgfSk7CiAgICAgIHJldHVybiB0b3RhbDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjbGVhckNhcnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9jbGVhckNhcnQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKHNob3BJZCkgewogICAgICAgIHZhciBkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVwb3NpdG9yeS5jbGVhckNhcnQoc2hvcElkKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgZGF0YSA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIGRhdGEuc3VjY2Vzcyk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGNsZWFyQ2FydChfeDMpIHsKICAgICAgICByZXR1cm4gX2NsZWFyQ2FydC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gY2xlYXJDYXJ0OwogICAgfSgpCiAgfV0pOwoKICByZXR1cm4gQ2FydFNlcnZpY2U7Cn0oKTsKCmV4cG9ydCBkZWZhdWx0IG5ldyBDYXJ0U2VydmljZSgpOw=="},{"version":3,"sources":["D:/project/blb-consumer-frontend/src/service/CartService.js"],"names":["repository","CartService","params","addProductIntoCart","data","success","Error","msg","shopId","getCartProductList","productList","total","forEach","v","productQuantity","clearCart"],"mappings":";;;;;;AAAA,OAAOA,UAAP,MAAuB,eAAvB,C,CACA;;IACMC,W;;;;;;;;iGACcC,M;;;;;;;uBACGF,UAAU,CAACG,kBAAX,CAA8BD,MAA9B,C;;;AAAbE,gBAAAA,I;;oBACDA,IAAI,CAACC,O;;;;;sBACF,IAAIC,KAAJ,CAAU,aAAaF,IAAI,CAACG,GAA5B,C;;;;;;;;;;;;;;;;;;;sGAIYC,M;;;;;;;uBACDR,UAAU,CAACS,kBAAX,CAA8BD,MAA9B,C;;;AAAbJ,gBAAAA,I;;oBACDA,IAAI,CAACC,O;;;;;sBACF,IAAIC,KAAJ,CAAU,iBAAiBF,IAAI,CAACG,GAAhC,C;;;kDAEDH,IAAI,CAACA,I;;;;;;;;;;;;;;;;;;iCAGAM,W,EAAa;AACzB,UAAI,CAACA,WAAL,EAAkB;AAChB,eAAO,CAAP;AACD;;AACD,UAAIC,KAAK,GAAG,CAAZ;AACAD,MAAAA,WAAW,CAACE,OAAZ,CAAoB,UAAAC,CAAC,EAAI;AACvBF,QAAAA,KAAK,IAAIE,CAAC,CAACC,eAAX;AACD,OAFD;AAGA,aAAOH,KAAP;AACD;;;;iGAEgBH,M;;;;;;;uBACIR,UAAU,CAACe,SAAX,CAAqBP,MAArB,C;;;AAAbJ,gBAAAA,I;kDACCA,IAAI,CAACC,O;;;;;;;;;;;;;;;;;;;;;AAGhB,eAAe,IAAIJ,WAAJ,EAAf","sourcesContent":["import repository from '../repository'\r\n// 购物车服务\r\nclass CartService {\r\n  async addProduct (params) {\r\n    const data = await repository.addProductIntoCart(params)\r\n    if (!data.success) {\r\n      throw new Error('加入购物车失败:' + data.msg)\r\n    }\r\n  }\r\n\r\n  async getProductList (shopId) {\r\n    const data = await repository.getCartProductList(shopId)\r\n    if (!data.success) {\r\n      throw new Error('获取购物车商品列表失败:' + data.msg)\r\n    }\r\n    return data.data\r\n  }\r\n\r\n  getCartTotal (productList) {\r\n    if (!productList) {\r\n      return 0\r\n    }\r\n    let total = 0\r\n    productList.forEach(v => {\r\n      total += v.productQuantity\r\n    })\r\n    return total\r\n  }\r\n\r\n  async clearCart (shopId) {\r\n    const data = await repository.clearCart(shopId)\r\n    return data.success\r\n  }\r\n}\r\nexport default new CartService()\r\n"]}]}